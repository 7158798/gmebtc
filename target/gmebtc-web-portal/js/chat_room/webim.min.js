! function(e, t) {
	e.Long = function() {
		"use strict";

		function e(e, t, n) {
			this.low = 0 | e, this.high = 0 | t, this.unsigned = !!n
		}

		function t(e) {
			return !0 === (e && e.__isLong__)
		}
		e.prototype.__isLong__, Object.defineProperty(e.prototype, "__isLong__", {
			value: !0,
			enumerable: !1,
			configurable: !1
		}), e.isLong = t;
		var n = {},
			i = {};

		function o(e, t) {
			var o, r, u;
			return t ? (u = 0 <= (e >>>= 0) && e < 256) && (r = i[e]) ? r : (o = s(e, (0 | e) < 0 ? -1 : 0, !0), u && (i[e] = o), o) : (u = -128 <= (e |= 0) && e < 128) && (r = n[e]) ? r : (o = s(e, e < 0 ? -1 : 0, !1), u && (n[e] = o), o)
		}

		function r(e, t) {
			if(isNaN(e) || !isFinite(e)) return t ? m : d;
			if(t) {
				if(e < 0) return m;
				if(e >= f) return M
			} else {
				if(e <= -g) return E;
				if(e + 1 >= g) return _
			}
			return e < 0 ? r(-e, t).neg() : s(e % l | 0, e / l | 0, t)
		}

		function s(t, n, i) {
			return new e(t, n, i)
		}
		e.fromInt = o, e.fromNumber = r, e.fromBits = s;
		var u = Math.pow;

		function a(e, t, n) {
			if(0 === e.length) throw Error("empty string");
			if("NaN" === e || "Infinity" === e || "+Infinity" === e || "-Infinity" === e) return d;
			if("number" == typeof t ? (n = t, t = !1) : t = !!t, (n = n || 10) < 2 || 36 < n) throw RangeError("radix");
			var i;
			if((i = e.indexOf("-")) > 0) throw Error("interior hyphen");
			if(0 === i) return a(e.substring(1), t, n).neg();
			for(var o = r(u(n, 8)), s = d, c = 0; c < e.length; c += 8) {
				var l = Math.min(8, e.length - c),
					f = parseInt(e.substring(c, c + l), n);
				if(l < 8) {
					var g = r(u(n, l));
					s = s.mul(g).add(r(f))
				} else s = (s = s.mul(o)).add(r(f))
			}
			return s.unsigned = t, s
		}

		function c(t) {
			return t instanceof e ? t : "number" == typeof t ? r(t) : "string" == typeof t ? a(t) : s(t.low, t.high, t.unsigned)
		}
		e.fromString = a, e.fromValue = c;
		var l = 4294967296,
			f = l * l,
			g = f / 2,
			p = o(1 << 24),
			d = o(0);
		e.ZERO = d;
		var m = o(0, !0);
		e.UZERO = m;
		var h = o(1);
		e.ONE = h;
		var I = o(1, !0);
		e.UONE = I;
		var y = o(-1);
		e.NEG_ONE = y;
		var _ = s(-1, 2147483647, !1);
		e.MAX_VALUE = _;
		var M = s(-1, -1, !0);
		e.MAX_UNSIGNED_VALUE = M;
		var E = s(0, -2147483648, !1);
		e.MIN_VALUE = E;
		var v = e.prototype;
		return v.toInt = function() {
			return this.unsigned ? this.low >>> 0 : this.low
		}, v.toNumber = function() {
			return this.unsigned ? (this.high >>> 0) * l + (this.low >>> 0) : this.high * l + (this.low >>> 0)
		}, v.toString = function(e) {
			if((e = e || 10) < 2 || 36 < e) throw RangeError("radix");
			if(this.isZero()) return "0";
			if(this.isNegative()) {
				if(this.eq(E)) {
					var t = r(e),
						n = this.div(t),
						i = n.mul(t).sub(this);
					return n.toString(e) + i.toInt().toString(e)
				}
				return "-" + this.neg().toString(e)
			}
			for(var o = r(u(e, 6), this.unsigned), s = this, a = "";;) {
				var c = s.div(o),
					l = (s.sub(c.mul(o)).toInt() >>> 0).toString(e);
				if((s = c).isZero()) return l + a;
				for(; l.length < 6;) l = "0" + l;
				a = "" + l + a
			}
		}, v.getHighBits = function() {
			return this.high
		}, v.getHighBitsUnsigned = function() {
			return this.high >>> 0
		}, v.getLowBits = function() {
			return this.low
		}, v.getLowBitsUnsigned = function() {
			return this.low >>> 0
		}, v.getNumBitsAbs = function() {
			if(this.isNegative()) return this.eq(E) ? 64 : this.neg().getNumBitsAbs();
			for(var e = 0 != this.high ? this.high : this.low, t = 31; t > 0 && 0 == (e & 1 << t); t--);
			return 0 != this.high ? t + 33 : t + 1
		}, v.isZero = function() {
			return 0 === this.high && 0 === this.low
		}, v.isNegative = function() {
			return !this.unsigned && this.high < 0
		}, v.isPositive = function() {
			return this.unsigned || this.high >= 0
		}, v.isOdd = function() {
			return 1 == (1 & this.low)
		}, v.isEven = function() {
			return 0 == (1 & this.low)
		}, v.equals = function(e) {
			return t(e) || (e = c(e)), (this.unsigned === e.unsigned || this.high >>> 31 != 1 || e.high >>> 31 != 1) && this.high === e.high && this.low === e.low
		}, v.eq = v.equals, v.notEquals = function(e) {
			return !this.eq(e)
		}, v.neq = v.notEquals, v.lessThan = function(e) {
			return this.comp(e) < 0
		}, v.lt = v.lessThan, v.lessThanOrEqual = function(e) {
			return this.comp(e) <= 0
		}, v.lte = v.lessThanOrEqual, v.greaterThan = function(e) {
			return this.comp(e) > 0
		}, v.gt = v.greaterThan, v.greaterThanOrEqual = function(e) {
			return this.comp(e) >= 0
		}, v.gte = v.greaterThanOrEqual, v.compare = function(e) {
			if(t(e) || (e = c(e)), this.eq(e)) return 0;
			var n = this.isNegative(),
				i = e.isNegative();
			return n && !i ? -1 : !n && i ? 1 : this.unsigned ? e.high >>> 0 > this.high >>> 0 || e.high === this.high && e.low >>> 0 > this.low >>> 0 ? -1 : 1 : this.sub(e).isNegative() ? -1 : 1
		}, v.comp = v.compare, v.negate = function() {
			return !this.unsigned && this.eq(E) ? E : this.not().add(h)
		}, v.neg = v.negate, v.add = function(e) {
			t(e) || (e = c(e));
			var n = this.high >>> 16,
				i = 65535 & this.high,
				o = this.low >>> 16,
				r = 65535 & this.low,
				u = e.high >>> 16,
				a = 65535 & e.high,
				l = e.low >>> 16,
				f = 0,
				g = 0,
				p = 0,
				d = 0;
			return p += (d += r + (65535 & e.low)) >>> 16, g += (p += o + l) >>> 16, f += (g += i + a) >>> 16, f += n + u, s((p &= 65535) << 16 | (d &= 65535), (f &= 65535) << 16 | (g &= 65535), this.unsigned)
		}, v.subtract = function(e) {
			return t(e) || (e = c(e)), this.add(e.neg())
		}, v.sub = v.subtract, v.multiply = function(e) {
			if(this.isZero()) return d;
			if(t(e) || (e = c(e)), e.isZero()) return d;
			if(this.eq(E)) return e.isOdd() ? E : d;
			if(e.eq(E)) return this.isOdd() ? E : d;
			if(this.isNegative()) return e.isNegative() ? this.neg().mul(e.neg()) : this.neg().mul(e).neg();
			if(e.isNegative()) return this.mul(e.neg()).neg();
			if(this.lt(p) && e.lt(p)) return r(this.toNumber() * e.toNumber(), this.unsigned);
			var n = this.high >>> 16,
				i = 65535 & this.high,
				o = this.low >>> 16,
				u = 65535 & this.low,
				a = e.high >>> 16,
				l = 65535 & e.high,
				f = e.low >>> 16,
				g = 65535 & e.low,
				m = 0,
				h = 0,
				I = 0,
				y = 0;
			return I += (y += u * g) >>> 16, h += (I += o * g) >>> 16, I &= 65535, h += (I += u * f) >>> 16, m += (h += i * g) >>> 16, h &= 65535, m += (h += o * f) >>> 16, h &= 65535, m += (h += u * l) >>> 16, m += n * g + i * f + o * l + u * a, s((I &= 65535) << 16 | (y &= 65535), (m &= 65535) << 16 | (h &= 65535), this.unsigned)
		}, v.mul = v.multiply, v.divide = function(e) {
			if(t(e) || (e = c(e)), e.isZero()) throw Error("division by zero");
			if(this.isZero()) return this.unsigned ? m : d;
			var n, i, o;
			if(this.unsigned) {
				if(e.unsigned || (e = e.toUnsigned()), e.gt(this)) return m;
				if(e.gt(this.shru(1))) return I;
				o = m
			} else {
				if(this.eq(E)) return e.eq(h) || e.eq(y) ? E : e.eq(E) ? h : (n = this.shr(1).div(e).shl(1)).eq(d) ? e.isNegative() ? h : y : (i = this.sub(e.mul(n)), o = n.add(i.div(e)));
				if(e.eq(E)) return this.unsigned ? m : d;
				if(this.isNegative()) return e.isNegative() ? this.neg().div(e.neg()) : this.neg().div(e).neg();
				if(e.isNegative()) return this.div(e.neg()).neg();
				o = d
			}
			for(i = this; i.gte(e);) {
				n = Math.max(1, Math.floor(i.toNumber() / e.toNumber()));
				for(var s = Math.ceil(Math.log(n) / Math.LN2), a = s <= 48 ? 1 : u(2, s - 48), l = r(n), f = l.mul(e); f.isNegative() || f.gt(i);) f = (l = r(n -= a, this.unsigned)).mul(e);
				l.isZero() && (l = h), o = o.add(l), i = i.sub(f)
			}
			return o
		}, v.div = v.divide, v.modulo = function(e) {
			return t(e) || (e = c(e)), this.sub(this.div(e).mul(e))
		}, v.mod = v.modulo, v.not = function() {
			return s(~this.low, ~this.high, this.unsigned)
		}, v.and = function(e) {
			return t(e) || (e = c(e)), s(this.low & e.low, this.high & e.high, this.unsigned)
		}, v.or = function(e) {
			return t(e) || (e = c(e)), s(this.low | e.low, this.high | e.high, this.unsigned)
		}, v.xor = function(e) {
			return t(e) || (e = c(e)), s(this.low ^ e.low, this.high ^ e.high, this.unsigned)
		}, v.shiftLeft = function(e) {
			return t(e) && (e = e.toInt()), 0 == (e &= 63) ? this : e < 32 ? s(this.low << e, this.high << e | this.low >>> 32 - e, this.unsigned) : s(0, this.low << e - 32, this.unsigned)
		}, v.shl = v.shiftLeft, v.shiftRight = function(e) {
			return t(e) && (e = e.toInt()), 0 == (e &= 63) ? this : e < 32 ? s(this.low >>> e | this.high << 32 - e, this.high >> e, this.unsigned) : s(this.high >> e - 32, this.high >= 0 ? 0 : -1, this.unsigned)
		}, v.shr = v.shiftRight, v.shiftRightUnsigned = function(e) {
			if(t(e) && (e = e.toInt()), 0 == (e &= 63)) return this;
			var n = this.high;
			return e < 32 ? s(this.low >>> e | n << 32 - e, n >>> e, this.unsigned) : s(32 === e ? n : n >>> e - 32, 0, this.unsigned)
		}, v.shru = v.shiftRightUnsigned, v.toSigned = function() {
			return this.unsigned ? s(this.low, this.high, !1) : this
		}, v.toUnsigned = function() {
			return this.unsigned ? this : s(this.low, this.high, !0)
		}, v.toBytes = function(e) {
			return e ? this.toBytesLE() : this.toBytesBE()
		}, v.toBytesLE = function() {
			var e = this.high,
				t = this.low;
			return [255 & t, t >>> 8 & 255, t >>> 16 & 255, t >>> 24 & 255, 255 & e, e >>> 8 & 255, e >>> 16 & 255, e >>> 24 & 255]
		}, v.toBytesBE = function() {
			var e = this.high,
				t = this.low;
			return [e >>> 24 & 255, e >>> 16 & 255, e >>> 8 & 255, 255 & e, t >>> 24 & 255, t >>> 16 & 255, t >>> 8 & 255, 255 & t]
		}, e
	}()
}(this);
var webim = {
	login: function(e, t, n) {},
	syncMsgs: function(e, t) {},
	getC2CHistoryMsgs: function(e, t, n) {},
	syncGroupMsgs: function(e, t, n) {},
	sendMsg: function(e, t, n) {},
	logout: function(e, t) {},
	setAutoRead: function(e, t, n) {},
	getProfilePortrait: function(e, t, n) {},
	setProfilePortrait: function(e, t, n) {},
	applyAddFriend: function(e, t, n) {},
	getPendency: function(e, t, n) {},
	deletePendency: function(e, t, n) {},
	responseFriend: function(e, t, n) {},
	getAllFriend: function(e, t, n) {},
	deleteFriend: function(e, t, n) {},
	addBlackList: function(e, t, n) {},
	getBlackList: function(e, t, n) {},
	deleteBlackList: function(e, t, n) {},
	uploadPic: function(e, t, n) {},
	createGroup: function(e, t, n) {},
	applyJoinGroup: function(e, t, n) {},
	handleApplyJoinGroup: function(e, t, n) {},
	deleteApplyJoinGroupPendency: function(e, t, n) {},
	quitGroup: function(e, t, n) {},
	getGroupPublicInfo: function(e, t, n) {},
	getGroupInfo: function(e, t, n) {},
	modifyGroupBaseInfo: function(e, t, n) {},
	destroyGroup: function(e, t, n) {},
	getJoinedGroupListHigh: function(e, t, n) {},
	getGroupMemberInfo: function(e, t, n) {},
	addGroupMember: function(e, t, n) {},
	modifyGroupMember: function(e, t, n) {},
	forbidSendMsg: function(e, t, n) {},
	deleteGroupMember: function(e, t, n) {},
	getPendencyGroup: function(e, t, n) {},
	getPendencyReport: function(e, t, n) {},
	getPendencyGroupRead: function(e, t, n) {},
	sendCustomGroupNotify: function(e, t, n) {},
	Msg: function(e, t, n, i, o, r, s, u) {},
	MsgStore: {
		sessMap: function() {
			return {}
		},
		sessCount: function() {
			return 0
		},
		sessByTypeId: function(e, t) {
			return {}
		},
		delSessByTypeId: function(e, t) {
			return !0
		},
		resetCookieAndSyncFlag: function() {},
		downloadMap: {}
	}
};
! function(e) {
	var t = "1.7.0",
		n = "537048168",
		i = "10",
		o = !0,
		r = {
			FORMAL: {
				COMMON: "https://webim.tim.qq.com",
				PIC: "https://pic.tim.qq.com"
			},
			TEST: {
				COMMON: "https://test.tim.qq.com",
				PIC: "https://pic.tim.qq.com"
			}
		},
		s = {},
		u = !1,
		a = "openim",
		c = "group_open_http_svc",
		l = "sns",
		f = "profile",
		g = "recentcontact",
		p = "openpic",
		d = "group_open_http_noauth_svc",
		m = "group_open_long_polling_http_noauth_svc",
		h = "imopenstat",
		I = "recentcontact",
		y = {
			openim: "v4",
			group_open_http_svc: "v4",
			sns: "v4",
			profile: "v4",
			recentcontact: "v4",
			openpic: "v4",
			group_open_http_noauth_svc: "v1",
			group_open_long_polling_http_noauth_svc: "v1",
			imopenstat: "v4",
			recentcontact: "v4"
		},
		_ = {
			login: 1,
			pic_up: 3,
			apply_join_group: 9,
			create_group: 10,
			longpolling: 18,
			send_group_msg: 19,
			sendmsg: 20
		},
		M = {
			C2C: "C2C",
			GROUP: "GROUP"
		},
		E = {
			OK: "OK",
			FAIL: "FAIL"
		},
		v = {
			TEXT: "TIMTextElem",
			FACE: "TIMFaceElem",
			IMAGE: "TIMImageElem",
			CUSTOM: "TIMCustomElem",
			SOUND: "TIMSoundElem",
			FILE: "TIMFileElem",
			LOCATION: "TIMLocationElem",
			GROUP_TIP: "TIMGroupTipElem"
		},
		T = {
			ORIGIN: 1,
			LARGE: 2,
			SMALL: 3
		},
		C = {
			JPG: 1,
			JPEG: 1,
			GIF: 2,
			PNG: 3,
			BMP: 4,
			UNKNOWN: 255
		},
		A = {
			RAW_DATA: 0,
			BASE64_DATA: 1
		},
		S = "10001",
		b = 2106,
		F = 2107,
		N = {
			IMAGE: 1,
			FILE: 2,
			SHORT_VIDEO: 3,
			SOUND: 4
		},
		O = {
			APP_VERSION: "2.1",
			SERVER_VERSION: 1
		},
		G = {
			C2C: 1,
			GROUP_COMMON: 3,
			GROUP_TIP: 4,
			GROUP_SYSTEM: 5,
			GROUP_TIP2: 6,
			FRIEND_NOTICE: 7,
			PROFILE_NOTICE: 8,
			C2C_COMMON: 9,
			C2C_EVENT: 10
		},
		R = 92,
		w = 96,
		L = {
			COMMON: 0,
			LOVEMSG: 1,
			TIP: 2,
			REDPACKET: 3
		},
		U = 1,
		P = 3,
		k = {
			JOIN: 1,
			QUIT: 2,
			KICK: 3,
			SET_ADMIN: 4,
			CANCEL_ADMIN: 5,
			MODIFY_GROUP_INFO: 6,
			MODIFY_MEMBER_INFO: 7
		},
		D = {
			FACE_URL: 1,
			NAME: 2,
			OWNER: 3,
			NOTIFICATION: 4,
			INTRODUCTION: 5
		},
		q = {
			JOIN_GROUP_REQUEST: 1,
			JOIN_GROUP_ACCEPT: 2,
			JOIN_GROUP_REFUSE: 3,
			KICK: 4,
			DESTORY: 5,
			CREATE: 6,
			INVITED_JOIN_GROUP_REQUEST: 7,
			QUIT: 8,
			SET_ADMIN: 9,
			CANCEL_ADMIN: 10,
			REVOKE: 11,
			READED: 15,
			CUSTOM: 255,
			INVITED_JOIN_GROUP_REQUEST_AGREE: 12
		},
		x = {
			FRIEND_ADD: 1,
			FRIEND_DELETE: 2,
			PENDENCY_ADD: 3,
			PENDENCY_DELETE: 4,
			BLACK_LIST_ADD: 5,
			BLACK_LIST_DELETE: 6,
			PENDENCY_REPORT: 7,
			FRIEND_UPDATE: 8
		},
		B = 1,
		K = {
			INIT: -1,
			ON: 0,
			RECONNECT: 1,
			OFF: 9999
		},
		J = 14,
		z = K.INIT,
		H = !1,
		j = 0,
		V = 6e4,
		Y = 60008,
		X = null,
		Q = 0,
		W = 0,
		$ = 0,
		Z = null,
		ee = null,
		te = 0,
		ne = [],
		ie = null,
		oe = null,
		re = {
			sdkAppID: null,
			appIDAt3rd: null,
			identifier: null,
			accountType: null,
			tinyid: null,
			identifierNick: null,
			userSig: null,
			a2: null,
			contentType: "json",
			apn: 1
		},
		se = {},
		ue = 0,
		ae = {},
		ce = 0,
		le = [],
		fe = [],
		ge = [],
		pe = {
			downloadMap: {}
		},
		de = {
			"[惊讶]": 0,
			"[撇嘴]": 1,
			"[色]": 2,
			"[发呆]": 3,
			"[得意]": 4,
			"[流泪]": 5,
			"[害羞]": 6,
			"[闭嘴]": 7,
			"[睡]": 8,
			"[大哭]": 9,
			"[尴尬]": 10,
			"[发怒]": 11,
			"[调皮]": 12,
			"[龇牙]": 13,
			"[微笑]": 14,
			"[难过]": 15,
			"[酷]": 16,
			"[冷汗]": 17,
			"[抓狂]": 18,
			"[吐]": 19,
			"[偷笑]": 20,
			"[可爱]": 21,
			"[白眼]": 22,
			"[傲慢]": 23,
			"[饿]": 24,
			"[困]": 25,
			"[惊恐]": 26,
			"[流汗]": 27,
			"[憨笑]": 28,
			"[大兵]": 29,
			"[奋斗]": 30,
			"[咒骂]": 31,
			"[疑问]": 32,
			"[嘘]": 33,
			"[晕]": 34,
			"[衰]": 35,
			"[骷髅]": 36,
			"[敲打]": 37,
			"[再见]": 38,
			"[发抖]": 39,
			"[爱情]": 40,
			"[跳跳]": 41,
			"[猪头]": 42,
			"[拥抱]": 43,
			"[蛋糕]": 44,
			"[闪电]": 45,
			"[炸弹]": 46,
			"[刀]": 47,
			"[足球]": 48,
			"[便便]": 49,
			"[咖啡]": 50,
			"[饭]": 51,
			"[鲜花]": 52,
			"[凋谢]": 53,
			"[爱心]": 54,
			"[心碎]": 55,
			"[礼物]": 56,
			"[太阳]": 57,
			"[月亮]": 58,
			"[强]": 59,
			"[弱]": 60,
			"[握手]": 61,
			"[飞吻]": 62,
			"[怄火]": 63,
			"[西瓜]": 64,
			"[抠鼻]": 65,
			"[鼓掌]": 66,
			"[糗大了]": 67,
			"[坏笑]": 68,
			"[左哼哼]": 69,
			"[右哼哼]": 70,
			"[哈欠]": 71,
			"[鄙视]": 72,
			"[委屈]": 73,
			"[快哭了]": 74,
			"[阴险]": 75,
			"[亲亲]": 76,
			"[吓]": 77,
			"[可怜]": 78,
			"[菜刀]": 79,
			"[啤酒]": 80,
			"[乒乓]": 81,
			"[示爱]": 82,
			"[瓢虫]": 83,
			"[抱拳]": 84,
			"[勾引]": 85,
			"[拳头]": 86,
			"[差劲]": 87,
			"[爱你]": 88,
			"[NO]": 89,
			"[OK]": 90,
			"[转圈]": 91,
			"[磕头]": 92,
			"[回头]": 93,
			"[跳绳]": 94,
			"[挥手]": 95,
			"[激动]": 96,
			"[街舞]": 97,
			"[献吻]": 98,
			"[左太极]": 99,
			"[右太极]": 100,
			"[祈祷]": 101
		},
		me = "../images/emo/",
		he = {
			0: ["[惊讶]", me + "jingya.gif"],
			1: ["[撇嘴]", me + "piezui.gif"],
			2: ["[色]", me + "se.gif"],
			3: ["[发呆]", me + "fadai.gif"],
			4: ["[得意]", me + "deyi.gif"],
			5: ["[流泪]", me + "liulei.gif"],
			6: ["[害羞]", me + "haixiu.gif"],
			7: ["[闭嘴]", me + "bizui.gif"],
			8: ["[睡]", me + "shui.gif"],
			9: ["[大哭]", me + "daku.gif"],
			10: ["[尴尬]", me + "ganga.gif"],
			11: ["[发怒]", me + "fanu.gif"],
			12: ["[调皮]", me + "tiaopi.gif"],
			13: ["[龇牙]", me + "ziya.gif"],
			14: ["[微笑]", me + "weixiao.gif"],
			15: ["[难过]", me + "nanguo.gif"],
			16: ["[酷]", me + "ku.gif"],
			17: ["[冷汗]", me + "lenghan.gif"],
			18: ["[抓狂]", me + "zhuakuang.gif"],
			19: ["[吐]", me + "tu.gif"],
			20: ["[偷笑]", me + "touxiao.gif"],
			21: ["[可爱]", me + "keai.gif"],
			22: ["[白眼]", me + "baiyan.gif"],
			23: ["[傲慢]", me + "aoman.gif"],
			24: ["[饿]", me + "e.gif"],
			25: ["[困]", me + "kun.gif"],
			26: ["[惊恐]", me + "jingkong.gif"],
			27: ["[流汗]", me + "liuhan.gif"],
			28: ["[憨笑]", me + "hanxiao.gif"],
			29: ["[大兵]", me + "dabing.gif"],
			30: ["[奋斗]", me + "fendou.gif"],
			31: ["[咒骂]", me + "zhouma.gif"],
			32: ["[疑问]", me + "yiwen.gif"],
			33: ["[嘘]", me + "xu.gif"],
			34: ["[晕]", me + "yun.gif"],
			35: ["[衰]", me + "shuai.gif"],
			36: ["[骷髅]", me + "kulou.gif"],
			37: ["[敲打]", me + "qiaoda.gif"],
			38: ["[再见]", me + "zaijian.gif"],
			39: ["[发抖]", me + "fadou.gif"],
			40: ["[爱情]", me + "aiqing.gif"],
			41: ["[跳跳]", me + "tiaotiao.gif"],
			42: ["[猪头]", me + "zhutou.gif"],
			43: ["[拥抱]", me + "yongbao.gif"],
			44: ["[蛋糕]", me + "dangao.gif"],
			45: ["[闪电]", me + "shandian.gif"],
			46: ["[炸弹]", me + "zhadan.gif"],
			47: ["[刀]", me + "dao.gif"],
			48: ["[足球]", me + "zuqiu.gif"],
			49: ["[便便]", me + "bianbian.gif"],
			50: ["[咖啡]", me + "kafei.gif"],
			51: ["[饭]", me + "fan.gif"],
			52: ["[玫瑰]", me + "xianhua.gif"],
			53: ["[凋谢]", me + "diaoxie.gif"],
			54: ["[爱心]", me + "aixin.gif"],
			55: ["[心碎]", me + "xinsui.gif"],
			56: ["[礼物]", me + "liwu.gif"],
			57: ["[太阳]", me + "taiyang.gif"],
			58: ["[月亮]", me + "yueliang.gif"],
			59: ["[强]", me + "qiang.gif"],
			60: ["[弱]", me + "ruo.gif"],
			61: ["[握手]", me + "woshou.gif"],
			62: ["[飞吻]", me + "feiwen.gif"],
			63: ["[怄火]", me + "ouhuo.gif"],
			64: ["[西瓜]", me + "xigua.gif"],
			65: ["[抠鼻]", me + "koubi.gif"],
			66: ["[鼓掌]", me + "guzhang.gif"],
			67: ["[糗大了]", me + "qiudale.gif"],
			68: ["[坏笑]", me + "huaixiao.gif"],
			69: ["[左哼哼]", me + "zuohengheng.gif"],
			70: ["[右哼哼]", me + "youhengheng.gif"],
			71: ["[哈欠]", me + "haqian.gif"],
			72: ["[鄙视]", me + "bishi.gif"],
			73: ["[委屈]", me + "weiqu.gif"],
			74: ["[快哭了]", me + "kuaikule.gif"],
			75: ["[阴险]", me + "yinxian.gif"],
			76: ["[亲亲]", me + "qinqin.gif"],
			77: ["[吓]", me + "xia.gif"],
			78: ["[可怜]", me + "kelian.gif"],
			79: ["[菜刀]", me + "caidao.gif"],
			80: ["[啤酒]", me + "pijiu.gif"],
			81: ["[乒乓]", me + "pingpang.gif"],
			82: ["[示爱]", me + "shiai.gif"],
			83: ["[瓢虫]", me + "piaochong.gif"],
			84: ["[抱拳]", me + "baoquan.gif"],
			85: ["[勾引]", me + "gouyin.gif"],
			86: ["[拳头]", me + "quantou.gif"],
			87: ["[差劲]", me + "chajin.gif"],
			88: ["[爱你]", me + "aini.gif"],
			89: ["[NO]", me + "no.gif"],
			90: ["[OK]", me + "ok.gif"],
			91: ["[转圈]", me + "zhuanquan.gif"],
			92: ["[磕头]", me + "ketou.gif"],
			93: ["[回头]", me + "huitou.gif"],
			94: ["[跳绳]", me + "tiaosheng.gif"],
			95: ["[挥手]", me + "huishou.gif"],
			96: ["[激动]", me + "jidong.gif"],
			97: ["[街舞]", me + "jiewu.gif"],
			98: ["[献吻]", me + "xianwen.gif"],
			99: ["[左太极]", me + "zuotaiji.gif"],
			100: ["[右太极]", me + "youtaiji.gif"],
			101: ["[祈祷]", me + "qidao.gif"]
		},
		Ie = new function() {
			this.formatTimeStamp = function(e, t) {
				if(!e) return 0;
				var n;
				t = t || "yyyy-MM-dd hh:mm:ss";
				var i = new Date(1e3 * e),
					o = {
						"M+": i.getMonth() + 1,
						"d+": i.getDate(),
						"h+": i.getHours(),
						"m+": i.getMinutes(),
						"s+": i.getSeconds()
					};
				for(var r in n = /(y+)/.test(t) ? t.replace(RegExp.$1, (i.getFullYear() + "").substr(4 - RegExp.$1.length)) : t, o) new RegExp("(" + r + ")").test(n) && (n = n.replace(RegExp.$1, 1 == RegExp.$1.length ? o[r] : ("00" + o[r]).substr(("" + o[r]).length)));
				return n
			}, this.groupTypeEn2Ch = function(e) {
				var t = null;
				switch(e) {
					case "Public":
						t = "公开群";
						break;
					case "ChatRoom":
						t = "聊天室";
						break;
					case "Private":
						t = "私有群";
						break;
					case "AVChatRoom":
						t = "直播聊天室";
						break;
					default:
						t = e
				}
				return t
			}, this.groupTypeCh2En = function(e) {
				var t = null;
				switch(e) {
					case "公开群":
						t = "Public";
						break;
					case "聊天室":
						t = "ChatRoom";
						break;
					case "私有群":
						t = "Private";
						break;
					case "直播聊天室":
						t = "AVChatRoom";
						break;
					default:
						t = e
				}
				return t
			}, this.groupRoleEn2Ch = function(e) {
				var t = null;
				switch(e) {
					case "Member":
						t = "成员";
						break;
					case "Admin":
						t = "管理员";
						break;
					case "Owner":
						t = "群主";
						break;
					default:
						t = e
				}
				return t
			}, this.groupRoleCh2En = function(e) {
				var t = null;
				switch(e) {
					case "成员":
						t = "Member";
						break;
					case "管理员":
						t = "Admin";
						break;
					case "群主":
						t = "Owner";
						break;
					default:
						t = e
				}
				return t
			}, this.groupMsgFlagEn2Ch = function(e) {
				var t = null;
				switch(e) {
					case "AcceptAndNotify":
						t = "接收并提示";
						break;
					case "AcceptNotNotify":
						t = "接收不提示";
						break;
					case "Discard":
						t = "屏蔽";
						break;
					default:
						t = e
				}
				return t
			}, this.groupMsgFlagCh2En = function(e) {
				var t = null;
				switch(e) {
					case "接收并提示":
						t = "AcceptAndNotify";
						break;
					case "接收不提示":
						t = "AcceptNotNotify";
						break;
					case "屏蔽":
						t = "Discard";
						break;
					default:
						t = e
				}
				return t
			}, this.formatText2Html = function(e) {
				var t = e;
				return t && (t = (t = (t = this.xssFilter(t)).replace(/ /g, "&nbsp;")).replace(/\n/g, "<br/>")), t
			}, this.formatHtml2Text = function(e) {
				var t = e;
				return t && (t = (t = t.replace(/&nbsp;/g, " ")).replace(/<br\/>/g, "\n")), t
			}, this.getStrBytes = function(e) {
				if(null == e || void 0 === e) return 0;
				if("string" != typeof e) return 0;
				var t, n, i, o = 0;
				for(n = 0, i = e.length; n < i; n++) o += (t = e.charCodeAt(n)) <= 127 ? 1 : t <= 2047 ? 2 : t <= 65535 ? 3 : 4;
				return o
			}, this.xssFilter = function(e) {
				return e = (e = (e = (e = e.toString()).replace(/[<]/g, "&lt;")).replace(/[>]/g, "&gt;")).replace(/"/g, "&quot;")
			}, this.trimStr = function(e) {
				return e ? (e = e.toString()).replace(/(^\s*)|(\s*$)/g, "") : ""
			}, this.validNumber = function(e) {
				return(e = e.toString()).match(/(^\d{1,8}$)/g)
			}, this.getReturnError = function(e, t) {
				return t || (t = -100), {
					ActionStatus: E.FAIL,
					ErrorCode: t,
					ErrorInfo: e + "[" + t + "]"
				}
			}, this.setCookie = function(e, t, n, i, o) {
				var r = new Date;
				r.setTime(r.getTime() + 1e3 * n), document.cookie = e + "=" + escape(t) + ";expires=" + r.toGMTString()
			}, this.getCookie = function(e) {
				var t = document.cookie.match(new RegExp("(^| )" + e + "=([^;]*)(;|$)"));
				return null != t ? unescape(t[2]) : null
			}, this.delCookie = function(e) {
				var t = new Date;
				t.setTime(t.getTime() - 1);
				var n = this.getCookie(e);
				null != n && (document.cookie = e + "=" + escape(n) + ";expires=" + t.toGMTString())
			}, this.getQueryString = function(e) {
				var t = new RegExp("(^|&)" + e + "=([^&]*)(&|$)", "i"),
					n = window.location.search.substr(1).match(t);
				return null != n ? unescape(n[2]) : null
			}, this.isIE = function(e) {
				var t = document.createElement("b");
				return t.innerHTML = "\x3c!--[if IE " + e + "]><i></i><![endif]--\x3e", 1 === t.getElementsByTagName("i").length
			}, this.getBrowserInfo = function() {
				var e, t = {},
					n = navigator.userAgent.toLowerCase();
				return(e = n.match(/msie ([\d.]+)/)) ? t.ie = e[1] : (e = n.match(/firefox\/([\d.]+)/)) ? t.firefox = e[1] : (e = n.match(/chrome\/([\d.]+)/)) ? t.chrome = e[1] : (e = n.match(/opera.([\d.]+)/)) ? t.opera = e[1] : (e = n.match(/version\/([\d.]+).*safari/)) && (t.safari = e[1]), t.ie ? {
					type: "ie",
					ver: t.ie
				} : t.firefox ? {
					type: "firefox",
					ver: t.firefox
				} : t.chrome ? {
					type: "chrome",
					ver: t.chrome
				} : t.opera ? {
					type: "opera",
					ver: t.opera
				} : t.safari ? {
					type: "safari",
					ver: t.safari
				} : {
					type: "unknow",
					ver: -1
				}
			}
		},
		ye = new function() {
			var e = !0;
			this.setOn = function(t) {
				e = t
			}, this.getOn = function() {
				return e
			}, this.error = function(t) {
				try {
					e && console.error(t)
				} catch(e) {}
			}, this.warn = function(t) {
				try {
					e && console.warn(t)
				} catch(e) {}
			}, this.info = function(t) {
				try {
					e && console.info(t)
				} catch(e) {}
			}, this.debug = function(t) {
				try {
					e && console.debug(t)
				} catch(e) {}
			}
		},
		_e = function(e) {
			return e || (e = new Date), Math.round(e.getTime() / 1e3)
		},
		Me = function() {
			return ce ? ce += 1 : ce = Math.round(1e7 * Math.random()), ce
		},
		Ee = function() {
			return Math.round(4294967296 * Math.random())
		},
		ve = function(e, t, n, i, o, r, s) {
			var u = function() {
				var e = null;
				if(window.XMLHttpRequest) e = new XMLHttpRequest;
				else try {
					e = new ActiveXObject("Msxml2.XMLHTTP")
				} catch(t) {
					try {
						e = new ActiveXObject("Microsoft.XMLHTTP")
					} catch(e) {
						return null
					}
				}
				return e
			}();
			if(!u) {
				"创建请求失败";
				var a = Ie.getReturnError("创建请求失败", -1);
				return ye.error("创建请求失败"), void(s && s(a))
			}
			ae[++ue] = u, u.open(e, t, !0), u.onreadystatechange = function() {
				4 == u.readyState && (ae[ue] = null, 200 == u.status ? (r && r(u.responseText), u = null, j = Q = 0) : (u = null, setTimeout(function() {
					var e = Ie.getReturnError("请求服务器失败,请检查你的网络是否正常", -2);
					s && s(e)
				}, 16)))
			}, u.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"), i || (i = 15e3), i && (u.timeout = i, u.ontimeout = function(e) {
				u = null
			}), u.send(n)
		},
		Te = function() {
			return re.sdkAppID && re.identifier
		},
		Ce = function(e, t) {
			if(!Te()) {
				if(t) {
					var n = Ie.getReturnError("请登录", -4);
					e && e(n)
				}
				return !1
			}
			return !0
		},
		Ae = function() {
			return o
		},
		Se = function(e, o, s, u) {
			var a = r;
			a = Ae() ? r.FORMAL.COMMON : r.TEST.COMMON, e == p && (a = Ae() ? r.FORMAL.PIC : r.TEST.PIC);
			var c = a + "/" + y[e] + "/" + e + "/" + o + "?websdkappid=" + n + "&v=" + t + "&platform=" + i;
			if(Te()) {
				if("login" == o) c += "&identifier=" + encodeURIComponent(re.identifier) + "&usersig=" + re.userSig;
				else if(re.tinyid && re.a2) c += "&tinyid=" + re.tinyid + "&a2=" + re.a2;
				else if(u) return ye.error("tinyid或a2为空[" + e + "][" + o + "]"), u(Ie.getReturnError("tinyid或a2为空[" + e + "][" + o + "]", -5)), !1;
				c += "&contenttype=" + re.contentType
			}
			return c += "&sdkappid=" + re.sdkAppID + "&apn=" + re.apn + "&reqtime=" + _e() + "&accounttype=" + re.accountType
		},
		be = function(e, t, n) {
			var i = null;
			return ie && ne[0] ? i = "http://" + ne[0] + "/asn.com/stddownload_common_file?authkey=" + ie + "&bid=" + S + "&subbid=" + re.sdkAppID + "&fileid=" + e + "&filetype=" + F + "&openid=" + t + "&ver=0&filename=" + encodeURIComponent(n) : ye.error("拼接文件下载url不报错：ip或者authkey为空"), pe.downloadMap["uuid_" + e] = i, i
		},
		Fe = function(e, t, n, i, o, r, s) {
			var u = {
				From_Account: t,
				To_Account: o,
				os_platform: 10,
				Timestamp: _e().toString(),
				Random: Ee().toString(),
				request_info: [{
					busi_id: r,
					download_flag: i,
					type: s,
					uuid: e,
					version: O.SERVER_VERSION,
					auth_key: ie,
					ip: ne[0]
				}]
			};
			Je(u, function(e) {
				0 == e.error_code && e.response_info && (pe.downloadMap["uuid_" + u.uuid] = e.response_info.url), onAppliedDownloadUrl && onAppliedDownloadUrl({
					uuid: u.uuid,
					url: e.response_info.url,
					maps: pe.downloadMap
				})
			}, function(e) {
				ye.error("获取下载地址失败", u.uuid)
			})
		},
		Ne = function() {
			! function() {
				for(var e in ae) {
					var t = ae[e];
					t && (t.abort(), ae[ue] = null)
				}
				ue = 0, ae = {}
			}(), re = {
				sdkAppID: null,
				appIDAt3rd: null,
				identifier: null,
				identifierNick: null,
				accountType: null,
				userSig: null,
				contentType: "json",
				apn: 1
			}, se = {}, ce = 0, $ = 0, Z = null, ge = [], Qe.clear(), X = null
		},
		Oe = function(e, n, i) {
			if("longpolling" != e || n != Y && 91101 != n) {
				var o = _[e];
				if(o) {
					var r = _e(),
						s = null,
						u = {
							Code: n,
							ErrMsg: i
						};
					if(re.a2 ? s = re.a2.substring(0, 10) + "_" + r + "_" + Ee() : re.userSig && (s = re.userSig.substring(0, 10) + "_" + r + "_" + Ee()), s) {
						var a = {
							UniqKey: s,
							EventId: o,
							ReportTime: r,
							MsgCmdErrorCode: u
						};
						if("login" == e) {
							var c = [];
							c.push(a), Be({
								EvtItems: c,
								MainVersion: t,
								Version: "0"
							}, function(e) {
								c = null
							}, function(e) {
								c = null
							})
						} else {
							if(ge.push(a), ge.length >= 20) Be({
								EvtItems: ge,
								MainVersion: t,
								Version: "0"
							}, function(e) {
								ge = []
							}, function(e) {
								ge = []
							})
						}
					}
				}
			}
		},
		Ge = function(e, t, n) {
			var i = Ie.getCookie("protoplogin_" + e.identifier);
			if(i) return i = JSON.parse(i), re.tinyid = i.TinyId, re.a2 = i.A2Key, void(t && t(re.identifierNick, re.headurl));
			ze.apiCall(a, "login", {
				State: "Online"
			}, function(i) {
				if(Ie.setCookie("protoplogin_" + e.identifier, JSON.stringify(i), 43200), i.TinyId) re.tinyid = i.TinyId;
				else if(n) return void n(Ie.getReturnError("TinyId is empty", -10));
				if(i.A2Key) re.a2 = i.A2Key;
				else if(n) return void n(Ie.getReturnError("A2Key is empty", -11));
				var o = {
					From_Account: re.identifier,
					To_Account: [re.identifier],
					LastStandardSequence: 0,
					TagList: ["Tag_Profile_IM_Nick", "Tag_Profile_IM_Image"]
				};
				qe(o, function(e) {
					var n;
					if(e.UserProfileItem && e.UserProfileItem.length > 0)
						for(var i in e.UserProfileItem)
							for(var o in e.UserProfileItem[i].ProfileItem) switch(e.UserProfileItem[i].ProfileItem[o].Tag) {
								case "Tag_Profile_IM_Nick":
									(n = e.UserProfileItem[i].ProfileItem[o].Value) && (re.identifierNick = n);
									break;
								case "Tag_Profile_IM_Image":
									image = e.UserProfileItem[i].ProfileItem[o].Value, image && (re.headurl = image)
							}
					t && t(re.identifierNick, re.headurl)
				}, n)
			}, n)
		},
		Re = function(e, t, n) {
			if(!Ce(n, !1)) return Ne(), void(t && t({
				ActionStatus: E.OK,
				ErrorCode: 0,
				ErrorInfo: "logout success"
			}));
			"all" == e ? ze.apiCall(a, "logout", {}, function(e) {
				Ne(), t && t(e)
			}, n) : ze.apiCall(a, "longpollinglogout", {
				LongPollingId: X
			}, function(e) {
				Ne(), t && t(e)
			}, n)
		},
		we = function(e, t, n) {
			(o || "undefined" == typeof stopPolling || 1 != stopPolling) && Ce(n, !0) && ze.apiCall(a, "longpolling", e, t, n, V, !0)
		},
		Le = function(e, t, n, i) {
			Ce(i, !0) && ze.apiCall(a, "getmsg", {
				Cookie: e,
				SyncFlag: t
			}, function(e) {
				if(e.MsgList && e.MsgList.length)
					for(var t in e.MsgList) le.push(e.MsgList[t]);
				1 == e.SyncFlag ? Le(e.Cookie, e.SyncFlag, n, i) : (e.MsgList = le, le = [], n && n(e))
			}, i)
		},
		Ue = function(e, t, n, i) {
			if(Ce(i, !0)) {
				var o = [];
				for(var r in t) {
					var s = {
						To_Account: t[r].toAccount,
						LastedMsgTime: t[r].lastedMsgTime
					};
					o.push(s)
				}
				ze.apiCall(a, "msgreaded", {
					C2CMsgReaded: {
						Cookie: e,
						C2CMsgReadedItem: o
					}
				}, n, i)
			}
		},
		Pe = function(e, t, n) {
			Ce(n, !0) && ze.apiCall(a, "getroammsg", e, function(i) {
				var o = e.MaxCnt,
					r = i.Complete,
					s = i.MaxCnt,
					u = i.MsgKey,
					a = i.LastMsgTime;
				if(i.MsgList && i.MsgList.length)
					for(var c in i.MsgList) fe.push(i.MsgList[c]);
				var l = null;
				0 == r && s < o && (l = {
					Peer_Account: e.Peer_Account,
					MaxCnt: o - s,
					LastMsgTime: a,
					MsgKey: u
				}), l ? Pe(l, t, n) : (i.MsgList = fe, fe = [], t && t(i))
			}, n)
		},
		ke = function(e, t, n) {
			Ce(n, !0) && ze.apiCall(c, "msg_read_report", {
				GroupId: e.GroupId,
				MsgReadedSeq: e.MsgReadedSeq
			}, t, n)
		},
		De = function(e) {
			var t = [];
			if(e.Fail_Account && e.Fail_Account.length && (t = e.Fail_Account), e.Invalid_Account && e.Invalid_Account.length)
				for(var n in e.Invalid_Account) t.push(e.Invalid_Account[n]);
			if(t.length)
				for(var i in e.ActionStatus = E.FAIL, e.ErrorCode = 99999, e.ErrorInfo = "", t) {
					var o = t[i];
					for(var r in e.ResultItem)
						if(e.ResultItem[r].To_Account == o) {
							var s = e.ResultItem[r].ResultCode;
							e.ResultItem[r].ResultInfo = "[" + s + "]" + e.ResultItem[r].ResultInfo, e.ErrorInfo += e.ResultItem[r].ResultInfo + "\n";
							break
						}
				}
			return e
		},
		qe = function(e, t, n) {
			e.To_Account.length > 100 && (e.To_Account.length = 100, ye.error("获取用户资料人数不能超过100人")), Ce(n, !0) && ze.apiCall(f, "portrait_get", {
				From_Account: re.identifier,
				To_Account: e.To_Account,
				TagList: e.TagList
			}, function(e) {
				var i = [];
				if(e.Fail_Account && e.Fail_Account.length && (i = e.Fail_Account), e.Invalid_Account && e.Invalid_Account.length)
					for(var o in e.Invalid_Account) i.push(e.Invalid_Account[o]);
				if(i.length)
					for(var r in e.ActionStatus = E.FAIL, e.ErrorCode = 99999, e.ErrorInfo = "", i) {
						var s = i[r];
						for(var u in e.UserProfileItem)
							if(e.UserProfileItem[u].To_Account == s) {
								var a = e.UserProfileItem[u].ResultCode;
								e.UserProfileItem[u].ResultInfo = "[" + a + "]" + e.UserProfileItem[u].ResultInfo, e.ErrorInfo += "账号:" + s + "," + e.UserProfileItem[u].ResultInfo + "\n";
								break
							}
					}
				e.ActionStatus == E.FAIL ? n && n(e) : t && t(e)
			}, n)
		},
		xe = function(e, t, n) {
			var i;
			Ce(n, !0) && (i = Ae() ? "pic_up" : "pic_up_test", ze.apiCall(p, i, {
				App_Version: O.APP_VERSION,
				From_Account: re.identifier,
				To_Account: e.To_Account,
				Seq: e.Seq,
				Timestamp: e.Timestamp,
				Random: e.Random,
				File_Str_Md5: e.File_Str_Md5,
				File_Size: e.File_Size,
				File_Type: e.File_Type,
				Server_Ver: O.SERVER_VERSION,
				Auth_Key: ie,
				Busi_Id: e.Busi_Id,
				PkgFlag: e.PkgFlag,
				Slice_Offset: e.Slice_Offset,
				Slice_Size: e.Slice_Size,
				Slice_Data: e.Slice_Data
			}, t, n))
		},
		Be = function(e, t, n) {
			Ce(n, !0) && ze.apiCall(h, "web_report", e, t, n)
		},
		Ke = function(e, t, n) {
			Ce(n, !0) && ze.apiCall(a, "getlongpollingid", {}, function(e) {
				t && t(e)
			}, n)
		},
		Je = function(e, t, n) {
			ze.apiCall(p, "apply_download", e, t, n)
		};
	"ie" == (s = Ie.getBrowserInfo()).type && parseInt(s.ver) < 10 && (u = !0);
	var ze = 0 == u ? new function() {
			var e = null;
			this.init = function(t, n, i) {
				t && (e = t)
			}, this.callBack = function(t) {
				e && e(t)
			}, this.clear = function() {
				e = null
			}, this.apiCall = function(e, t, n, i, o, r, s) {
				var u, a, c, l, f = Se(e, t, 0, o);
				0 != f && (u = n, a = r, c = function(r) {
					var s = null,
						u = "";
					"pic_up" == t && (n.Slice_Data = "");
					var a = "\n request url: \n" + f + "\n request body: \n" + JSON.stringify(n) + "\n response: \n" + JSON.stringify(r);
					r.ActionStatus == E.OK ? (ye.info("[" + e + "][" + t + "]success: " + a), i && i(r), s = 0, u = "") : (s = r.ErrorCode, u = r.ErrorInfo, o && (r.SrcErrorInfo = r.ErrorInfo, r.ErrorInfo = "[" + e + "][" + t + "]failed: " + a, "longpolling" == t && r.ErrorCode == Y || ye.error(r.ErrorInfo), o(r))), Oe(t, s, u)
				}, l = function(e) {
					o && o(e), Oe(t, e.ErrorCode, e.ErrorInfo)
				}, ve("POST", f, JSON.stringify(u), a, 0, function(e) {
					var t = null;
					try {
						e && (t = JSON.parse(e)), c && c(t)
					} catch(e) {
						l && l(e)
					}
				}, l))
			}
		} : new function() {
			var e = null;
			this.init = function(t, n, i) {
				t && (e = t)
			}, this.callBack = function(t) {
				e && e(t)
			}, this.clear = function() {
				e = null
			}, this.apiCall = function(e, t, n, i, o, r, s) {
				var u = Se(e, t, 0, o);
				if(0 != u) {
					var a = $++,
						c = "jsonpRequest" + a,
						l = document.createElement("script"),
						f = 0;
					window[c] = ee, l.type = "text/javascript", u = u + "&jsonpcallback=" + c + "&jsonpbody=" + encodeURIComponent(JSON.stringify(n)), l.src = u, l.async = !0, void 0 !== l.onreadystatechange && (l.event = "onclick", l.htmlFor = l.id = "_jsonpRequest_" + a), l.onload = l.onreadystatechange = function() {
						if(this.readyState && "complete" !== this.readyState && "loaded" !== this.readyState || f) return !1;
						l.onload = l.onreadystatechange = null, l.onclick && l.onclick();
						var r = Z,
							s = "\n request url: \n" + u + "\n request body: \n" + JSON.stringify(n) + "\n response: \n" + JSON.stringify(r);
						r.ActionStatus == E.OK ? (ye.info("[" + e + "][" + t + "]success: " + s), i && i(r)) : (r.ErrorInfo = "[" + e + "][" + t + "]failed " + s, "longpolling" != t || r.ErrorCode != Y ? ye.error(r.ErrorInfo) : ye.warn("[" + e + "][" + t + "]success: " + s), o && o(r)), Z = void 0, document.body.removeChild(l), f = 1
					}, document.body.appendChild(l)
				}
			}
		},
		He = function(e, t, n, i, o, r) {
			this._impl = {
				skey: He.skey(e, t),
				type: e,
				id: t,
				name: n,
				icon: i,
				unread: 0,
				isAutoRead: !1,
				time: o >= 0 ? o : 0,
				curMaxMsgSeq: r >= 0 ? r : 0,
				msgs: [],
				isFinished: 1
			}
		};
	He.skey = function(e, t) {
		return e + t
	}, He.prototype.type = function() {
		return this._impl.type
	}, He.prototype.id = function() {
		return this._impl.id
	}, He.prototype.name = function() {
		return this._impl.name
	}, He.prototype.icon = function() {
		return this._impl.icon
	}, He.prototype.unread = function(e) {
		if(void 0 === e) return this._impl.unread;
		this._impl.unread = e
	}, He.prototype.isFinished = function(e) {
		if(void 0 === e) return this._impl.isFinished;
		this._impl.isFinished = e
	}, He.prototype.time = function() {
		return this._impl.time
	}, He.prototype.curMaxMsgSeq = function(e) {
		if(void 0 === e) return this._impl.curMaxMsgSeq;
		this._impl.curMaxMsgSeq = e
	}, He.prototype.msgCount = function() {
		return this._impl.msgs.length
	}, He.prototype.msg = function(e) {
		return this._impl.msgs[e]
	}, He.prototype.msgs = function() {
		return this._impl.msgs
	}, He.prototype._impl_addMsg = function(e) {
		this._impl.msgs.push(e), e.time > this._impl.time && (this._impl.time = e.time), e.seq > this._impl.curMaxMsgSeq && (this._impl.curMaxMsgSeq = e.seq), e.isSend || this._impl.isAutoRead || this._impl.unread++
	};
	var je = function(e, t) {
			this.toAccount = e, this.lastedMsgTime = t
		},
		Ve = function(e, t) {
			for(var n = parseInt(e).toString(2) + "00000000000000000000000000000000", i = parseInt(t).toString(2), o = n.split("").reverse(), r = i.split("").reverse(), s = [], u = o.length > r.length ? o.length : r.length, a = 0; a < u; a++) sig = Number(o[a] || 0) || Number(r[a] || 0), s.push(sig);
			var c = s.reverse().join(""),
				l = {
					high: "0x" + parseInt(c.substr(0, c.length - 32), 2).toString(16),
					low: "0x" + parseInt(c.substr(c.length - 32 - 1), 2).toString(16)
				};
			return new Long(l.low, l.high, !0).toString()
		},
		Ye = function(e, t, n, i, o, r, s, u) {
			switch(this.sess = e, this.subType = s >= 0 ? s : 0, this.fromAccount = r, this.fromAccountNick = u || r, this.isSend = Boolean(t), this.seq = n >= 0 ? n : Me(), this.random = i >= 0 ? i : Ee(), this.time = o >= 0 ? o : _e(), this.elems = [], e.type()) {
				case M.GROUP:
					this.uniqueId = Ve(this.seq, this.random);
					break;
				case M.C2C:
				default:
					this.uniqueId = Ve(this.time, this.random)
			}
		};
	Ye.prototype.getSession = function() {
		return this.sess
	}, Ye.prototype.getType = function() {
		return this.subType
	}, Ye.prototype.getSubType = function() {
		return this.subType
	}, Ye.prototype.getFromAccount = function() {
		return this.fromAccount
	}, Ye.prototype.getFromAccountNick = function() {
		return this.fromAccountNick
	}, Ye.prototype.getIsSend = function() {
		return this.isSend
	}, Ye.prototype.getSeq = function() {
		return this.seq
	}, Ye.prototype.getTime = function() {
		return this.time
	}, Ye.prototype.getRandom = function() {
		return this.random
	}, Ye.prototype.getElems = function() {
		return this.elems
	}, Ye.prototype.getMsgUniqueId = function() {
		return this.uniqueId
	}, Ye.prototype.addText = function(t) {
		this.addElem(new e.Msg.Elem(v.TEXT, t))
	}, Ye.prototype.addFace = function(t) {
		this.addElem(new e.Msg.Elem(v.FACE, t))
	}, Ye.prototype.addImage = function(t) {
		this.addElem(new e.Msg.Elem(v.IMAGE, t))
	}, Ye.prototype.addLocation = function(t) {
		this.addElem(new e.Msg.Elem(v.LOCATION, t))
	}, Ye.prototype.addFile = function(t) {
		this.addElem(new e.Msg.Elem(v.FILE, t))
	}, Ye.prototype.addCustom = function(t) {
		this.addElem(new e.Msg.Elem(v.CUSTOM, t))
	}, Ye.prototype.addElem = function(e) {
		this.elems.push(e)
	}, Ye.prototype.toHtml = function() {
		var e = "";
		for(var t in this.elems) {
			e += this.elems[t].toHtml()
		}
		return e
	}, (Ye.Elem = function(e, t) {
		this.type = e, this.content = t
	}).prototype.getType = function() {
		return this.type
	}, Ye.Elem.prototype.getContent = function() {
		return this.content
	}, Ye.Elem.prototype.toHtml = function() {
		return this.content.toHtml()
	}, Ye.Elem.Text = function(e) {
		this.text = Ie.xssFilter(e)
	}, Ye.Elem.Text.prototype.getText = function() {
		return this.text
	}, Ye.Elem.Text.prototype.toHtml = function() {
		return this.text
	}, Ye.Elem.Face = function(e, t) {
		this.index = e, this.data = t
	}, Ye.Elem.Face.prototype.getIndex = function() {
		return this.index
	}, Ye.Elem.Face.prototype.getData = function() {
		return this.data
	}, Ye.Elem.Face.prototype.toHtml = function() {
		var e = null,
			t = de[this.data],
			n = he[t];
		return n && n[1] && (e = n[1]), e ? "<img src='" + e + "'/>" : this.data
	}, Ye.Elem.Location = function(e, t, n) {
		this.latitude = t, this.longitude = e, this.desc = n
	}, Ye.Elem.Location.prototype.getLatitude = function() {
		return this.latitude
	}, Ye.Elem.Location.prototype.getLongitude = function() {
		return this.longitude
	}, Ye.Elem.Location.prototype.getDesc = function() {
		return this.desc
	}, Ye.Elem.Location.prototype.toHtml = function() {
		return "经度=" + this.longitude + ",纬度=" + this.latitude + ",描述=" + this.desc
	}, Ye.Elem.Images = function(e, t) {
		this.UUID = e, "number" != typeof t && (t = parseInt(C[t] || C.UNKNOWN, 10)), this.ImageFormat = t, this.ImageInfoArray = []
	}, Ye.Elem.Images.prototype.addImage = function(e) {
		this.ImageInfoArray.push(e)
	}, Ye.Elem.Images.prototype.toHtml = function() {
		var e = this.getImage(T.SMALL),
			t = this.getImage(T.LARGE),
			n = this.getImage(T.ORIGIN);
		return t || (t = e), n || (n = e), "<img src='" + e.getUrl() + "#" + t.getUrl() + "#" + n.getUrl() + "' style='CURSOR: hand' id='" + this.getImageId() + "' bigImgUrl='" + t.getUrl() + "' onclick='imageClick(this)' />"
	}, Ye.Elem.Images.prototype.getImageId = function() {
		return this.UUID
	}, Ye.Elem.Images.prototype.getImageFormat = function() {
		return this.ImageFormat
	}, Ye.Elem.Images.prototype.getImage = function(e) {
		for(var t in this.ImageInfoArray)
			if(this.ImageInfoArray[t].getType() == e) return this.ImageInfoArray[t];
		return null
	}, Ye.Elem.Images.Image = function(e, t, n, i, o) {
		this.type = e, this.size = t, this.width = n, this.height = i, this.url = o
	}, Ye.Elem.Images.Image.prototype.getType = function() {
		return this.type
	}, Ye.Elem.Images.Image.prototype.getSize = function() {
		return this.size
	}, Ye.Elem.Images.Image.prototype.getWidth = function() {
		return this.width
	}, Ye.Elem.Images.Image.prototype.getHeight = function() {
		return this.height
	}, Ye.Elem.Images.Image.prototype.getUrl = function() {
		return this.url
	}, Ye.Elem.Sound = function(e, t, n, i, o, r, s) {
		var u, a, c;
		this.uuid = e, this.second = t, this.size = n, this.senderId = i, this.receiverId = o, this.downFlag = r, this.busiId = s == M.C2C ? 2 : 1, void 0 !== r && void 0 !== busiId ? Fe(e, i, 0, r, o, this.busiId, N.SOUND) : this.downUrl = (u = e, a = i, c = null, ie && ne[0] ? c = "http://" + ne[0] + "/asn.com/stddownload_common_file?authkey=" + ie + "&bid=" + S + "&subbid=" + re.sdkAppID + "&fileid=" + u + "&filetype=" + b + "&openid=" + a + "&ver=0" : ye.error("拼接语音下载url不报错：ip或者authkey为空"), c)
	}, Ye.Elem.Sound.prototype.getUUID = function() {
		return this.uuid
	}, Ye.Elem.Sound.prototype.getSecond = function() {
		return this.second
	}, Ye.Elem.Sound.prototype.getSize = function() {
		return this.size
	}, Ye.Elem.Sound.prototype.getSenderId = function() {
		return this.senderId
	}, Ye.Elem.Sound.prototype.getDownUrl = function() {
		return this.downUrl
	}, Ye.Elem.Sound.prototype.toHtml = function() {
		return "ie" == s.type && parseInt(s.ver) <= 8 ? "[这是一条语音消息]demo暂不支持ie8(含)以下浏览器播放语音,语音URL:" + this.downUrl : '<audio id="uuid_' + this.uuid + '" src="' + this.downUrl + '" controls="controls" onplay="onChangePlayAudio(this)" preload="none"></audio>'
	}, Ye.Elem.File = function(e, t, n, i, o, r, s) {
		this.uuid = e, this.name = t, this.size = n, this.senderId = i, this.receiverId = o, this.downFlag = r, this.busiId = s == M.C2C ? 2 : 1, void 0 !== r && void 0 !== busiId ? Fe(e, i, 0, r, o, this.busiId, N.FILE) : this.downUrl = be(e, i, t)
	}, Ye.Elem.File.prototype.getUUID = function() {
		return this.uuid
	}, Ye.Elem.File.prototype.getName = function() {
		return this.name
	}, Ye.Elem.File.prototype.getSize = function() {
		return this.size
	}, Ye.Elem.File.prototype.getSenderId = function() {
		return this.senderId
	}, Ye.Elem.File.prototype.getDownUrl = function() {
		return this.downUrl
	}, Ye.Elem.File.prototype.getDownFlag = function() {
		return this.downFlag
	}, Ye.Elem.File.prototype.toHtml = function() {
		var e, t;
		return e = this.size, t = "Byte", this.size >= 1024 && (e = Math.round(this.size / 1024), t = "KB"), '<a href="javascript" onclick="webim.onDownFile("' + this.uuid + '")" title="点击下载文件" ><i class="glyphicon glyphicon-file">&nbsp;' + this.name + "(" + e + t + ")</i></a>"
	}, Ye.Elem.GroupTip = function(e, t, n, i, o) {
		this.opType = e, this.opUserId = t, this.groupId = n, this.groupName = i, this.userIdList = o || [], this.groupInfoList = [], this.memberInfoList = [], this.groupMemberNum = null
	}, Ye.Elem.GroupTip.prototype.addGroupInfo = function(e) {
		this.groupInfoList.push(e)
	}, Ye.Elem.GroupTip.prototype.addMemberInfo = function(e) {
		this.memberInfoList.push(e)
	}, Ye.Elem.GroupTip.prototype.getOpType = function() {
		return this.opType
	}, Ye.Elem.GroupTip.prototype.getOpUserId = function() {
		return this.opUserId
	}, Ye.Elem.GroupTip.prototype.getGroupId = function() {
		return this.groupId
	}, Ye.Elem.GroupTip.prototype.getGroupName = function() {
		return this.groupName
	}, Ye.Elem.GroupTip.prototype.getUserIdList = function() {
		return this.userIdList
	}, Ye.Elem.GroupTip.prototype.getGroupInfoList = function() {
		return this.groupInfoList
	}, Ye.Elem.GroupTip.prototype.getMemberInfoList = function() {
		return this.memberInfoList
	}, Ye.Elem.GroupTip.prototype.getGroupMemberNum = function() {
		return this.groupMemberNum
	}, Ye.Elem.GroupTip.prototype.setGroupMemberNum = function(e) {
		return this.groupMemberNum = e
	}, Ye.Elem.GroupTip.prototype.toHtml = function() {
		var e = "[群提示消息]";
		switch(this.opType) {
			case k.JOIN:
				for(var t in e += this.opUserId + "邀请了", this.userIdList)
					if(e += this.userIdList[t] + ",", this.userIdList.length > 10 && 9 == t) {
						e += "等" + this.userIdList.length + "人";
						break
					}
				e += "加入该群";
				break;
			case k.QUIT:
				e += this.opUserId + "主动退出该群";
				break;
			case k.KICK:
				for(var t in e += this.opUserId + "将", this.userIdList)
					if(e += this.userIdList[t] + ",", this.userIdList.length > 10 && 9 == t) {
						e += "等" + this.userIdList.length + "人";
						break
					}
				e += "踢出该群";
				break;
			case k.SET_ADMIN:
				for(var t in e += this.opUserId + "将", this.userIdList)
					if(e += this.userIdList[t] + ",", this.userIdList.length > 10 && 9 == t) {
						e += "等" + this.userIdList.length + "人";
						break
					}
				e += "设为管理员";
				break;
			case k.CANCEL_ADMIN:
				for(var t in e += this.opUserId + "取消", this.userIdList)
					if(e += this.userIdList[t] + ",", this.userIdList.length > 10 && 9 == t) {
						e += "等" + this.userIdList.length + "人";
						break
					}
				e += "的管理员资格";
				break;
			case k.MODIFY_GROUP_INFO:
				for(var t in e += this.opUserId + "修改了群资料：", this.groupInfoList) {
					var n = this.groupInfoList[t].getType(),
						i = this.groupInfoList[t].getValue();
					switch(n) {
						case D.FACE_URL:
							e += "群头像为" + i + "; ";
							break;
						case D.NAME:
							e += "群名称为" + i + "; ";
							break;
						case D.OWNER:
							e += "群主为" + i + "; ";
							break;
						case D.NOTIFICATION:
							e += "群公告为" + i + "; ";
							break;
						case D.INTRODUCTION:
							e += "群简介为" + i + "; ";
							break;
						default:
							e += "未知信息为:type=" + n + ",value=" + i + "; "
					}
				}
				break;
			case k.MODIFY_MEMBER_INFO:
				for(var t in e += this.opUserId + "修改了群成员资料:", this.memberInfoList) {
					var o = this.memberInfoList[t].getUserId(),
						r = this.memberInfoList[t].getShutupTime();
					if(e += o + ": ", e += null != r && void 0 !== r ? 0 == r ? "取消禁言; " : "禁言" + r + "秒; " : " shutupTime为空", this.memberInfoList.length > 10 && 9 == t) {
						e += "等" + this.memberInfoList.length + "人";
						break
					}
				}
				break;
			case k.READED:
				Log.info("消息已读同步");
				break;
			default:
				e += "未知群提示消息类型：type=" + this.opType
		}
		return e
	}, Ye.Elem.GroupTip.GroupInfo = function(e, t) {
		this.type = e, this.value = t
	}, Ye.Elem.GroupTip.GroupInfo.prototype.getType = function() {
		return this.type
	}, Ye.Elem.GroupTip.GroupInfo.prototype.getValue = function() {
		return this.value
	}, Ye.Elem.GroupTip.MemberInfo = function(e, t) {
		this.userId = e, this.shutupTime = t
	}, Ye.Elem.GroupTip.MemberInfo.prototype.getUserId = function() {
		return this.userId
	}, Ye.Elem.GroupTip.MemberInfo.prototype.getShutupTime = function() {
		return this.shutupTime
	}, Ye.Elem.Custom = function(e, t, n) {
		this.data = e, this.desc = t, this.ext = n
	}, Ye.Elem.Custom.prototype.getData = function() {
		return this.data
	}, Ye.Elem.Custom.prototype.getDesc = function() {
		return this.desc
	}, Ye.Elem.Custom.prototype.getExt = function() {
		return this.ext
	}, Ye.Elem.Custom.prototype.toHtml = function() {
		return this.data
	};
	var Xe = new function() {
			var e = {},
				t = [];
			window.msgCache = {}, this.cookie = "", this.syncFlag = 0;
			var n = function(t) {
				for(var n in e) t(e[n])
			};
			this.sessMap = function() {
				return e
			}, this.sessCount = function() {
				return t.length
			}, this.sessByTypeId = function(t, n) {
				var i = He.skey(t, n);
				return void 0 === i || null == i ? null : e[i]
			}, this.delSessByTypeId = function(t, n) {
				var i = He.skey(t, n);
				return void 0 !== i && null != i && (e[i] && (delete e[i], delete msgCache[i]), !0)
			}, this.resetCookieAndSyncFlag = function() {
				this.cookie = "", this.syncFlag = 0
			}, this.setAutoRead = function(e, t, i) {
				if(i && n(function(e) {
						e._impl.isAutoRead = !1
					}), e && (e._impl.isAutoRead = t, t))
					if(e._impl.unread = 0, e._impl.type == M.C2C) {
						var o = [];
						o.push(new je(e._impl.id, e._impl.time)), Ue(Xe.cookie, o, function(e) {
							ye.info("[setAutoRead]: c2CMsgReaded success")
						}, function(e) {
							ye.error("[setAutoRead}: c2CMsgReaded failed:" + e.ErrorInfo)
						})
					} else if(e._impl.type == M.GROUP) {
					var r = {
						GroupId: e._impl.id,
						MsgReadedSeq: e._impl.curMaxMsgSeq
					};
					ke(r, function(e) {
						ye.info("groupMsgReaded success")
					}, function(e) {
						ye.error("groupMsgReaded failed:" + e.ErrorInfo)
					})
				}
			}, this.c2CMsgReaded = function(e, t, n) {
				var i = [];
				i.push(new je(e.To_Account, e.LastedMsgTime)), Ue(Xe.cookie, i, function(e) {
					t && (ye.info("c2CMsgReaded success"), t(e))
				}, function(e) {
					n && (ye.error("c2CMsgReaded failed:" + e.ErrorInfo), n(e))
				})
			}, this.addSession = function(t) {
				e[t._impl.skey] = t
			}, this.delSession = function(t) {
				delete e[t._impl.skey]
			}, this.addMsg = function(t) {
				if(i = !1, o = (n = t).sess._impl.skey, r = n.isSend + n.seq + n.random, msgCache[o] && msgCache[o][r] && (i = !0), msgCache[o] ? msgCache[o][r] = {
						time: n.time
					} : (msgCache[o] = {}, msgCache[o][r] = {
						time: n.time
					}), i) return !1;
				var n, i, o, r, s = t.sess;
				return e[s._impl.skey] || this.addSession(s), s._impl_addMsg(t), !0
			}, this.updateTimeline = function() {
				var e = new Array;
				n(function(t) {
					e.push(t)
				}), e.sort(function(e, t) {
					return t.time - e.time
				}), t = e
			}
		},
		Qe = new function() {
			var e = null,
				t = null,
				n = {
					1: null,
					2: null,
					3: null,
					4: null,
					5: null,
					6: null,
					7: null,
					8: null,
					9: null,
					10: null,
					11: null,
					15: null,
					255: null,
					12: null
				},
				i = {
					1: null,
					2: null,
					3: null,
					4: null,
					5: null,
					6: null,
					7: null,
					8: null
				},
				o = {
					1: null
				},
				r = !1,
				s = 0,
				u = 0,
				l = null,
				f = !1,
				g = {},
				p = {},
				d = {},
				h = {},
				I = {
					92: null,
					96: null
				},
				y = null,
				_ = null,
				T = 0,
				C = {},
				A = {};
			this.setLongPollingOn = function(e) {
				r = e
			}, this.getLongPollingOn = function() {
				return r
			}, this.resetLongPollingInfo = function() {
				r = !1, s = 0, u = 0
			}, this.setBigGroupLongPollingOn = function(e) {
				f = e
			}, this.setBigGroupLongPollingKey = function(e, t) {
				t,
				p[e] = t
			}, this.resetBigGroupLongPollingInfo = function() {
				f = !1, 0, null, p = {}, d = {}, h = {}
			}, this.setBigGroupLongPollingMsgMap = function(e, t) {
				var n = h[e];
				n ? (n = parseInt(n) + t, h[e] = n) : h[e] = t
			}, this.clear = function() {
				t = null, n = {
					1: null,
					2: null,
					3: null,
					4: null,
					5: null,
					6: null,
					7: null,
					8: null,
					9: null,
					10: null,
					11: null,
					15: null,
					255: null,
					12: null
				}, i = {
					1: null,
					2: null,
					3: null,
					4: null,
					5: null,
					6: null,
					7: null,
					8: null
				}, o = {
					1: null
				}, e = null, r = !1, s = 0, u = 0, l = null, f = !1, 0, null, d = {}, p = {}, h = {}, A = {}, ne = [], ie = null, oe = null
			};
			var S = function(e, t, n) {
					var i, o, r = Ie.getCookie("authkey_" + e.identifier);
					if(r) return r = JSON.parse(r), ne = r.ipList, ie = r.authkey, oe = r.expireTime, void(t && t(r));
					i = function(n) {
						ne = n.IpList, ie = n.AuthKey, oe = n.ExpireTime;
						var i = {
							ipList: ne,
							authkey: ie,
							expireTime: oe
						};
						Ie.setCookie("authkey_" + e.identifier, JSON.stringify(i), 259200), t && t(n)
					}, Ce(o = function(e) {
						ye.error("initIpAndAuthkey failed:" + e.ErrorInfo), n && n(e)
					}, !0) && ze.apiCall(a, "authkey", {}, i, o)
				},
				b = function(e, t, n) {
					T++;
					var i = {
						GroupId: e,
						ReqMsgSeq: t,
						ReqMsgNumber: n
					};
					ye.warn("第" + T + "次补齐群消息,参数=" + JSON.stringify(i)), Qe.syncGroupMsgs(i)
				},
				F = function(e, t) {
					var n = C[e];
					n ? t > n && (C[e] = t) : C[e] = t
				},
				N = function(e, t) {
					for(var n in e) {
						var i = e[n];
						if(i.From_Account) {
							var o = le(i, !1, !0);
							o && t.push(o), F(i.ToGroupId, i.MsgSeq)
						}
					}
					return t
				},
				O = function(t, n) {
					var i = {},
						o = [];
					for(var r in n) {
						var s = i[n[r].ToGroupId];
						s || (s = i[n[r].ToGroupId] = {
							min: 99999999,
							max: -1,
							msgs: []
						}), n[r].NoticeSeq > u && (ye.warn("noticeSeq=" + u + ",msgNoticeSeq=" + n[r].NoticeSeq), u = n[r].NoticeSeq), n[r].Event = t, i[n[r].ToGroupId].msgs.push(n[r]), n[r].MsgSeq < s.min && (i[n[r].ToGroupId].min = n[r].MsgSeq), n[r].MsgSeq > s.max && (i[n[r].ToGroupId].max = n[r].MsgSeq)
					}
					for(var a in i) {
						var c = i[a].max - i[a].min + 1,
							l = C[a];
						l ? i[a].min - l > 1 || i[a].msgs.length < c ? (ye.warn("发起一次补齐群消息请求,curMaxMsgSeq=" + l + ", minMsgSeq=" + i[a].min + ", maxMsgSeq=" + i[a].max + ", msgs.length=" + i[a].msgs.length + ", tempCount=" + c), b(a, i[a].max, i[a].max - l), F(a, i[a].max)) : o = N(i[a].msgs, o) : (ye.warn("不存在该群的最大消息seq，群id=" + a), i[a].msgs.length < c ? (ye.warn("发起一次补齐群消息请求,minMsgSeq=" + i[a].min + ", maxMsgSeq=" + i[a].max + ", msgs.length=" + i[a].msgs.length + ", tempCount=" + c), b(a, i[a].max, c), F(a, i[a].max)) : o = N(i[a].msgs, o))
					}
					o.length && Xe.updateTimeline(), e && o.length && e(o)
				},
				W = function(t, n) {
					var i = {},
						o = [];
					for(var r in n) {
						var s = i[n[r].ToGroupId];
						s || (s = i[n[r].ToGroupId] = {
							min: 99999999,
							max: -1,
							msgs: []
						}), n[r].NoticeSeq > u && (ye.warn("noticeSeq=" + u + ",msgNoticeSeq=" + n[r].NoticeSeq), u = n[r].NoticeSeq), n[r].Event = t, i[n[r].ToGroupId].msgs.push(n[r]), n[r].MsgSeq < s.min && (i[n[r].ToGroupId].min = n[r].MsgSeq), n[r].MsgSeq > s.max && (i[n[r].ToGroupId].max = n[r].MsgSeq)
					}
					for(var a in i) {
						var c = i[a].max - i[a].min + 1,
							l = C[a];
						l ? i[a].min - l > 1 || i[a].msgs.length < c ? (ye.warn("发起一次补齐群消息请求,curMaxMsgSeq=" + l + ", minMsgSeq=" + i[a].min + ", maxMsgSeq=" + i[a].max + ", msgs.length=" + i[a].msgs.length + ", tempCount=" + c), b(a, i[a].max, i[a].max - l), F(a, i[a].max)) : o = N(i[a].msgs, o) : (ye.warn("不存在该群的最大消息seq，群id=" + a), i[a].msgs.length < c ? (ye.warn("发起一次补齐群消息请求,minMsgSeq=" + i[a].min + ", maxMsgSeq=" + i[a].max + ", msgs.length=" + i[a].msgs.length + ", tempCount=" + c), b(a, i[a].max, c), F(a, i[a].max)) : o = N(i[a].msgs, o))
					}
					o.length && Xe.updateTimeline(), e && o.length && e(o)
				},
				$ = function(e, t) {
					for(var i in e) {
						var o = e[i],
							r = o.MsgBody,
							s = r.ReportType;
						0 == t && o.NoticeSeq && o.NoticeSeq > u && (u = o.NoticeSeq);
						o.GroupInfo.To_Account;
						if(t) {
							var a = o.ToGroupId + "_" + s + "_" + r.Operator_Account;
							if(A[a]) {
								ye.warn("收到重复的群系统消息：key=" + a);
								continue
							}
							A[a] = !0
						}
						var c = {
							SrcFlag: 0,
							ReportType: s,
							GroupId: o.ToGroupId,
							GroupName: o.GroupInfo.GroupName,
							Operator_Account: r.Operator_Account,
							MsgTime: o.MsgTimeStamp,
							groupReportTypeMsg: r
						};
						switch(s) {
							case q.JOIN_GROUP_REQUEST:
								c.RemarkInfo = r.RemarkInfo, c.MsgKey = r.MsgKey, c.Authentication = r.Authentication, c.UserDefinedField = o.UserDefinedField, c.From_Account = o.From_Account, c.MsgSeq = o.ClientSeq, c.MsgRandom = o.MsgRandom;
								break;
							case q.JOIN_GROUP_ACCEPT:
							case q.JOIN_GROUP_REFUSE:
								c.RemarkInfo = r.RemarkInfo;
								break;
							case q.KICK:
							case q.DESTORY:
							case q.CREATE:
							case q.INVITED_JOIN_GROUP_REQUEST:
							case q.INVITED_JOIN_GROUP_REQUEST_AGREE:
							case q.QUIT:
							case q.SET_ADMIN:
							case q.CANCEL_ADMIN:
							case q.REVOKE:
							case q.READED:
								break;
							case q.CUSTOM:
								c.MsgSeq = o.MsgSeq, c.UserDefinedField = r.UserDefinedField;
								break;
							default:
								ye.error("未知群系统消息类型：reportType=" + s)
						}
						if(t) n[s] ? n[s](c) : ye.error("未知群系统消息类型：reportType=" + s);
						else if(n[s])
							if(s == q.READED)
								for(var l = c.groupReportTypeMsg.GroupReadInfoArray, f = 0, g = l.length; f < g; f++) {
									var p = l[f];
									n[s](p)
								} else n[s](c)
					}
				},
				Z = function(e, t) {
					var n, o, r;
					for(var s in e) {
						switch(o = (n = e[s]).PushType, 0 == t && n.NoticeSeq && n.NoticeSeq > u && (u = n.NoticeSeq), r = {
							Type: o
						}, o) {
							case x.FRIEND_ADD:
								r.Accounts = n.FriendAdd_Account;
								break;
							case x.FRIEND_DELETE:
								r.Accounts = n.FriendDel_Account;
								break;
							case x.PENDENCY_ADD:
								r.PendencyList = n.PendencyAdd;
								break;
							case x.PENDENCY_DELETE:
								r.Accounts = n.FrienPencydDel_Account;
								break;
							case x.BLACK_LIST_ADD:
								r.Accounts = n.BlackListAdd_Account;
								break;
							case x.BLACK_LIST_DELETE:
								r.Accounts = n.BlackListDel_Account;
								break;
							default:
								ye.error("未知好友系统通知类型：friendNotice=" + JSON.stringify(n))
						}
						t ? o == x.PENDENCY_ADD && i[o] && i[o](r) : i[o] && i[o](r)
					}
				},
				ee = function(e, t) {
					var n, i, r;
					for(var s in e) {
						switch(i = (n = e[s]).PushType, 0 == t && n.NoticeSeq && n.NoticeSeq > u && (u = n.NoticeSeq), r = {
							Type: i
						}, i) {
							case B:
								r.Profile_Account = n.Profile_Account, r.ProfileList = n.ProfileList;
								break;
							default:
								ye.error("未知资料系统通知类型：profileNotice=" + JSON.stringify(n))
						}
						t ? i == B && o[i] && o[i](r) : o[i] && o[i](r)
					}
				},
				te = function(e) {
					var t = e.MsgBody,
						i = t.ReportType,
						o = (e.GroupInfo.To_Account, {
							SrcFlag: 1,
							ReportType: i,
							GroupId: e.ToGroupId,
							GroupName: e.GroupInfo.GroupName,
							Operator_Account: t.Operator_Account,
							MsgTime: e.MsgTimeStamp
						});
					switch(i) {
						case q.JOIN_GROUP_REQUEST:
							o.RemarkInfo = t.RemarkInfo, o.MsgKey = t.MsgKey, o.Authentication = t.Authentication, o.UserDefinedField = e.UserDefinedField, o.From_Account = e.From_Account, o.MsgSeq = e.ClientSeq, o.MsgRandom = e.MsgRandom;
							break;
						case q.JOIN_GROUP_ACCEPT:
						case q.JOIN_GROUP_REFUSE:
							o.RemarkInfo = t.RemarkInfo;
							break;
						case q.KICK:
						case q.DESTORY:
						case q.CREATE:
						case q.INVITED_JOIN_GROUP_REQUEST:
						case q.INVITED_JOIN_GROUP_REQUEST_AGREE:
						case q.QUIT:
						case q.SET_ADMIN:
						case q.CANCEL_ADMIN:
						case q.REVOKE:
							break;
						case q.CUSTOM:
							o.MsgSeq = e.MsgSeq, o.UserDefinedField = t.UserDefinedField;
							break;
						default:
							ye.error("未知群系统消息类型：reportType=" + i)
					}
					n[i] && n[i](o)
				},
				se = function(e) {
					for(var t = 0, n = e.length; t < n; t++) ue(e[t])
				},
				ue = function(e) {
					var t = e.SubMsgType;
					switch(t) {
						case R:
							if(e.ReadC2cMsgNotify.UinPairReadArray && I[t])
								for(var n = 0, i = e.ReadC2cMsgNotify.UinPairReadArray.length; n < i; n++) {
									var o = e.ReadC2cMsgNotify.UinPairReadArray[n];
									I[t](o)
								}
							break;
						case w:
							I[t] && I[t]();
							break;
						default:
							ye.error("未知C2c系统消息：subType=" + t)
					}
				};
			this.longPolling = function(e, t) {
				var n = {
					Timeout: V / 1e3,
					Cookie: {
						NotifySeq: s,
						NoticeSeq: u
					}
				};

				function i() {
					we(n, function(e) {
						for(var t in e.EventArray) {
							var n = e.EventArray[t];
							switch(n.Event) {
								case G.C2C:
									s = n.NotifySeq, ye.warn("longpolling: received new c2c msg"), Qe.syncMsgs();
									break;
								case G.GROUP_COMMON:
									ye.warn("longpolling: received new group msgs"), W(n.Event, n.GroupMsgArray);
									break;
								case G.GROUP_TIP:
								case G.GROUP_TIP2:
									ye.warn("longpolling: received new group tips"), W(n.Event, n.GroupTips);
									break;
								case G.GROUP_SYSTEM:
									ye.warn("longpolling: received new group system msgs"), $(n.GroupTips, !1);
									break;
								case G.FRIEND_NOTICE:
									ye.warn("longpolling: received new friend system notice"), Z(n.FriendListMod, !1);
									break;
								case G.PROFILE_NOTICE:
									ye.warn("longpolling: received new profile system notice"), ee(n.ProfileDataMod, !1);
									break;
								case G.C2C_COMMON:
									u = n.C2cMsgArray[0].NoticeSeq, ye.warn("longpolling: received new c2c_common msg", u), O(n.Event, n.C2cMsgArray);
									break;
								case G.C2C_EVENT:
									u = n.C2cNotifyMsgArray[0].NoticeSeq, ye.warn("longpolling: received new c2c_event msg"), se(n.C2cNotifyMsgArray);
									break;
								default:
									ye.error("longpolling收到未知新消息类型: Event=" + n.Event)
							}
						}
						var i = {
							ActionStatus: E.OK,
							ErrorCode: 0
						};
						ae(i)
					}, function(e) {
						ae(e), t && t(e)
					})
				}
				X ? (n.Cookie.LongPollingId = X, i()) : Ke(0, function(e) {
					X = n.Cookie.LongPollingId = e.LongPollingId, V = e.Timeout > 60 ? V : 1e3 * e.Timeout, i()
				})
			}, this.bigGroupLongPolling = function(e, t, n) {
				if(void 0 === d[e] && (d[e] = 0), void 0 === g[e] && (g[e] = 90), void 0 === p[e]) return console.info(e), void console.info(p);
				var i, o, r, s, u = {
					StartSeq: d[e],
					HoldTime: g[e],
					Key: p[e]
				};
				i = u, o = function(n) {
					var i = [];
					if(n.NextSeq, n.HoldTime, d[e] = n.NextSeq, p[e] = n.Key, g[e] = n.HoldTime, n.RspMsgList && n.RspMsgList.length > 0) {
						for(var o, r, s, u = 0, a = n.RspMsgList.length - 1; a >= 0; a--)
							if(!(o = n.RspMsgList[a]).IsPlaceMsg && o.From_Account && o.MsgBody && 0 != o.MsgBody.length) switch(r = o.Event) {
								case G.GROUP_COMMON:
									ye.info("bigGroupLongPolling: return new group msg"), (s = le(o, !1, !1)) && i.push(s), u += 1;
									break;
								case G.GROUP_TIP:
								case G.GROUP_TIP2:
									ye.info("bigGroupLongPolling: return new group tip"), (s = le(o, !1, !1)) && i.push(s);
									break;
								case G.GROUP_SYSTEM:
									ye.info("bigGroupLongPolling: new group system msg"), te(o);
									break;
								default:
									ye.error("bigGroupLongPolling收到未知新消息类型: Event=" + r)
							}
						u > 0 && (Qe.setBigGroupLongPollingMsgMap(o.ToGroupId, u), ye.warn("current bigGroupLongPollingMsgMap: " + JSON.stringify(h)))
					}
					Q = 0;
					var c = {
						ActionStatus: E.OK,
						ErrorCode: K.ON,
						ErrorInfo: "connection is ok..."
					};
					ze.callBack(c), t ? t(i) : l && l(i), f && setTimeout(function() {
						Qe.bigGroupLongPolling(e)
					}, 3e3)
				}, r = function(e) {
					if(console.info(e.toString()), e.ErrorCode != Y && (ye.error(e.ErrorInfo), Q++), 91101 == e.ErrorCode && (ye.error("多实例登录，被kick"), y && y()), 70221 === e.ErrorCode) _ && _(e);
					else {
						if(Q < 10) f && Qe.bigGroupLongPolling();
						else {
							var t = {
								ActionStatus: E.FAIL,
								ErrorCode: K.OFF,
								ErrorInfo: "connection is off"
							};
							ze.callBack(t)
						}
						n && n(e)
					}
				}, s = 1e3 * g[e], ze.apiCall(m, "get_msg", i, o, r, s)
			};
			var ae = function(e) {
					if(0 == e.ErrorCode || e.ErrorCode == Y) {
						var t;
						j = 0, H = !1;
						var n = !1;
						switch(z) {
							case K.INIT:
								n = !0, z = K.ON, t = "create connection successfully(INIT->ON)";
								break;
							case K.ON:
								t = "connection is on...(ON->ON)";
								break;
							case K.RECONNECT:
								z = K.ON, t = "connection is on...(RECONNECT->ON)";
								break;
							case K.OFF:
								n = !0, z = K.RECONNECT, t = "reconnect successfully(OFF->RECONNECT)"
						}
						var i = {
							ActionStatus: E.OK,
							ErrorCode: z,
							ErrorInfo: t
						};
						n && ze.callBack(i), r && Qe.longPolling()
					} else if(91101 == e.ErrorCode) ye.error("多实例登录，被kick"), y && y();
					else if(70221 === e.ErrorCode) _ && _(e);
					else if(j++, ye.warn("longPolling接口第" + j + "次报错: " + e.ErrorInfo), j <= 10) setTimeout(ce, 100);
					else {
						z = K.OFF;
						var o = {
							ActionStatus: E.FAIL,
							ErrorCode: K.OFF,
							ErrorInfo: "connection is off"
						};
						0 == H && ze.callBack(o), H = !0, ye.warn("5000毫秒之后,SDK会发起新的longPolling请求..."), setTimeout(ce, 5e3)
					}
				},
				ce = (O = function(t, n) {
					var i, o = [];
					for(var r in i = n) {
						var s, u, a, c = i[r];
						c.From_Account == re.identifier ? (s = !0, u = c.To_Account, a = "") : (s = !1, u = c.From_Account, a = "");
						var l = Xe.sessByTypeId(M.C2C, u);
						l || (l = new He(M.C2C, u, u, a, 0, 0));
						var f = new Ye(l, s, c.MsgSeq, c.MsgRandom, c.MsgTimeStamp, c.From_Account),
							g = null,
							p = null,
							d = null;
						for(var m in c.MsgBody) {
							switch(d = (g = c.MsgBody[m]).MsgType) {
								case v.TEXT:
									p = new Ye.Elem.Text(g.MsgContent.Text);
									break;
								case v.FACE:
									p = new Ye.Elem.Face(g.MsgContent.Index, g.MsgContent.Data);
									break;
								case v.IMAGE:
									for(var h in p = new Ye.Elem.Images(g.MsgContent.UUID, g.MsgContent.ImageFormat || ""), g.MsgContent.ImageInfoArray) {
										var I = g.MsgContent.ImageInfoArray[h];
										p.addImage(new Ye.Elem.Images.Image(I.Type, I.Size, I.Width, I.Height, I.URL))
									}
									break;
								case v.SOUND:
									g.MsgContent ? p = new Ye.Elem.Sound(g.MsgContent.UUID, g.MsgContent.Second, g.MsgContent.Size, c.From_Account, c.To_Account, g.MsgContent.Download_Flag, M.C2C) : (d = v.TEXT, p = new Ye.Elem.Text("[语音消息]下载地址解析出错"));
									break;
								case v.LOCATION:
									p = new Ye.Elem.Location(g.MsgContent.Longitude, g.MsgContent.Latitude, g.MsgContent.Desc);
									break;
								case v.FILE:
								case v.FILE + " ":
									d = v.FILE, g.MsgContent ? p = new Ye.Elem.File(g.MsgContent.UUID, g.MsgContent.FileName, g.MsgContent.FileSize, c.From_Account, c.To_Account, g.MsgContent.Download_Flag, M.C2C) : (d = v.TEXT, p = new Ye.Elem.Text("[文件消息下载地址解析出错]"));
									break;
								case v.CUSTOM:
									try {
										var y = JSON.parse(g.MsgContent.Data);
										if(y && y.userAction && y.userAction == J) continue
									} catch(e) {}
									d = v.CUSTOM, p = new Ye.Elem.Custom(g.MsgContent.Data, g.MsgContent.Desc, g.MsgContent.Ext);
									break;
								default:
									d = v.TEXT, p = new Ye.Elem.Text("web端暂不支持" + g.MsgType + "消息")
							}
							f.elems.push(new Ye.Elem(d, p))
						}
						f.elems.length > 0 && Xe.addMsg(f) && o.push(f)
					}
					o.length > 0 && Xe.updateTimeline(), o.length > 0 && e && e(o)
				}, function() {
					r && Qe.longPolling()
				});
			this.syncMsgs = function(t, n) {
				var i = [],
					o = [];
				Le(Xe.cookie, Xe.syncFlag, function(n) {
					for(var r in 2 == n.SyncFlag && (Xe.syncFlag = 0), o = n.MsgList, Xe.cookie = n.Cookie, o) {
						var s, u, a, c = o[r];
						c.From_Account == re.identifier ? (s = !0, u = c.To_Account, a = "") : (s = !1, u = c.From_Account, a = "");
						var l = Xe.sessByTypeId(M.C2C, u);
						l || (l = new He(M.C2C, u, u, a, 0, 0));
						var f = new Ye(l, s, c.MsgSeq, c.MsgRandom, c.MsgTimeStamp, c.From_Account),
							g = null,
							p = null,
							d = null;
						for(var m in c.MsgBody) {
							switch(d = (g = c.MsgBody[m]).MsgType) {
								case v.TEXT:
									p = new Ye.Elem.Text(g.MsgContent.Text);
									break;
								case v.FACE:
									p = new Ye.Elem.Face(g.MsgContent.Index, g.MsgContent.Data);
									break;
								case v.IMAGE:
									for(var h in p = new Ye.Elem.Images(g.MsgContent.UUID, g.MsgContent.ImageFormat), g.MsgContent.ImageInfoArray) {
										var I = g.MsgContent.ImageInfoArray[h];
										p.addImage(new Ye.Elem.Images.Image(I.Type, I.Size, I.Width, I.Height, I.URL))
									}
									break;
								case v.SOUND:
									g.MsgContent ? p = new Ye.Elem.Sound(g.MsgContent.UUID, g.MsgContent.Second, g.MsgContent.Size, c.From_Account, c.To_Account, g.MsgContent.Download_Flag, M.C2C) : (d = v.TEXT, p = new Ye.Elem.Text("[语音消息]下载地址解析出错"));
									break;
								case v.LOCATION:
									p = new Ye.Elem.Location(g.MsgContent.Longitude, g.MsgContent.Latitude, g.MsgContent.Desc);
									break;
								case v.FILE:
								case v.FILE + " ":
									d = v.FILE, g.MsgContent ? p = new Ye.Elem.File(g.MsgContent.UUID, g.MsgContent.FileName, g.MsgContent.FileSize, c.From_Account, c.To_Account, g.MsgContent.Download_Flag, M.C2C) : (d = v.TEXT, p = new Ye.Elem.Text("[文件消息下载地址解析出错]"));
									break;
								case v.CUSTOM:
									try {
										var y = JSON.parse(g.MsgContent.Data);
										if(y && y.userAction && y.userAction == J) continue
									} catch(e) {}
									d = v.CUSTOM, p = new Ye.Elem.Custom(g.MsgContent.Data, g.MsgContent.Desc, g.MsgContent.Ext);
									break;
								default:
									d = v.TEXT, p = new Ye.Elem.Text("web端暂不支持" + g.MsgType + "消息")
							}
							f.elems.push(new Ye.Elem(d, p))
						}
						f.elems.length > 0 && Xe.addMsg(f) && i.push(f)
					}! function(e) {
						for(var t in e) {
							var n = e[t];
							switch($(n.GroupTips, !0), n.Event) {
								case G.GROUP_SYSTEM:
									ye.warn("handlerApplyJoinGroupSystemMsgs： handler new group system msg"), $(n.GroupTips, !0);
									break;
								default:
									ye.error("syncMsgs收到未知的群系统消息类型: Event=" + n.Event)
							}
						}
					}(n.EventArray), i.length > 0 && Xe.updateTimeline(), t ? t(i) : i.length > 0 && e && e(i)
				}, function(e) {
					ye.error("getMsgs failed:" + e.ErrorInfo), n && n(e)
				})
			}, this.getC2CHistoryMsgs = function(e, t, n) {
				if(e.Peer_Account || !n)
					if(e.MaxCnt || (e.MaxCnt = 15), e.MaxCnt <= 0 && n) n(Ie.getReturnError("MaxCnt should be greater than 0", -14));
					else {
						if(e.MaxCnt > 15) return n ? void n(Ie.getReturnError("MaxCnt can not be greater than 15", -15)) : void 0;
						null != e.MsgKey && void 0 !== e.MsgKey || (e.MsgKey = "");
						var i = {
							Peer_Account: e.Peer_Account,
							MaxCnt: e.MaxCnt,
							LastMsgTime: e.LastMsgTime,
							MsgKey: e.MsgKey
						};
						Pe(i, function(n) {
							var i, o = [];
							i = n.MsgList;
							var r = Xe.sessByTypeId(M.C2C, e.Peer_Account);
							for(var s in r || (r = new He(M.C2C, e.Peer_Account, e.Peer_Account, "", 0, 0)), i) {
								var u, a = i[s];
								a.From_Account == re.identifier ? (u = !0, a.To_Account, "") : (u = !1, a.From_Account, "");
								var c = new Ye(r, u, a.MsgSeq, a.MsgRandom, a.MsgTimeStamp, a.From_Account),
									l = null,
									f = null,
									g = null;
								for(var p in a.MsgBody) {
									switch(g = (l = a.MsgBody[p]).MsgType) {
										case v.TEXT:
											f = new Ye.Elem.Text(l.MsgContent.Text);
											break;
										case v.FACE:
											f = new Ye.Elem.Face(l.MsgContent.Index, l.MsgContent.Data);
											break;
										case v.IMAGE:
											for(var d in f = new Ye.Elem.Images(l.MsgContent.UUID, l.MsgContent.ImageFormat), l.MsgContent.ImageInfoArray) {
												var m = l.MsgContent.ImageInfoArray[d];
												f.addImage(new Ye.Elem.Images.Image(m.Type, m.Size, m.Width, m.Height, m.URL))
											}
											break;
										case v.SOUND:
											l.MsgContent ? f = new Ye.Elem.Sound(l.MsgContent.UUID, l.MsgContent.Second, l.MsgContent.Size, a.From_Account, a.To_Account, l.MsgContent.Download_Flag, M.C2C) : (g = v.TEXT, f = new Ye.Elem.Text("[语音消息]下载地址解析出错"));
											break;
										case v.LOCATION:
											f = new Ye.Elem.Location(l.MsgContent.Longitude, l.MsgContent.Latitude, l.MsgContent.Desc);
											break;
										case v.FILE:
										case v.FILE + " ":
											g = v.FILE, l.MsgContent ? f = new Ye.Elem.File(l.MsgContent.UUID, l.MsgContent.FileName, l.MsgContent.FileSize, a.From_Account, a.To_Account, l.MsgContent.Download_Flag, M.C2C) : (g = v.TEXT, f = new Ye.Elem.Text("[文件消息下载地址解析出错]"));
											break;
										case v.CUSTOM:
											g = v.CUSTOM, f = new Ye.Elem.Custom(l.MsgContent.Data, l.MsgContent.Desc, l.MsgContent.Ext);
											break;
										default:
											g = v.TEXT, f = new Ye.Elem.Text("web端暂不支持" + l.MsgType + "消息")
									}
									c.elems.push(new Ye.Elem(g, f))
								}
								Xe.addMsg(c), o.push(c)
							}
							if(Xe.updateTimeline(), t) {
								var h = {
									Complete: n.Complete,
									MsgCount: o.length,
									LastMsgTime: n.LastMsgTime,
									MsgKey: n.MsgKey,
									MsgList: o
								};
								r.isFinished(n.Complete), t(h)
							}
						}, function(e) {
							ye.error("getC2CHistoryMsgs failed:" + e.ErrorInfo), n && n(e)
						})
					}
				else n(Ie.getReturnError("Peer_Account is empty", -13))
			}, this.syncGroupMsgs = function(t, n, i) {
				if(t.ReqMsgSeq <= 0) {
					if(i) {
						var o = Ie.getReturnError("ReqMsgSeq must be greater than 0", -16);
						i(o)
					}
				} else {
					var r, s, u, a = {
						GroupId: t.GroupId,
						ReqMsgSeq: t.ReqMsgSeq,
						ReqMsgNumber: t.ReqMsgNumber
					};
					r = a, s = function(t) {
						var i = [],
							o = (t.GroupId, t.RspMsgList),
							r = t.IsFinished;
						if(null != o && void 0 !== o) {
							for(var s = o.length - 1; s >= 0; s--) {
								var u = o[s];
								if(!u.IsPlaceMsg && u.From_Account && u.MsgBody && 0 != u.MsgBody.length) {
									var a = le(u, !0, !0, r);
									a && i.push(a)
								}
							}
							i.length > 0 && Xe.updateTimeline(), n ? n(i) : i.length > 0 && e && e(i)
						} else n && n([])
					}, Ce(u = function(e) {
						ye.error("getGroupMsgs failed:" + e.ErrorInfo), i && i(e)
					}, !0) && ze.apiCall(c, "group_msg_get", {
						GroupId: r.GroupId,
						ReqMsgSeq: r.ReqMsgSeq,
						ReqMsgNumber: r.ReqMsgNumber
					}, s, u)
				}
			};
			var le = function(e, n, i, o) {
				if(e.IsPlaceMsg || !e.From_Account || !e.MsgBody || 0 == e.MsgBody.length) return null;
				var r, s, u, a, c = e.ToGroupId,
					l = c;
				e.GroupInfo && e.GroupInfo.GroupName && (l = e.GroupInfo.GroupName), u = e.From_Account, e.GroupInfo && (e.GroupInfo.From_AccountNick && (u = e.GroupInfo.From_AccountNick), a = e.GroupInfo.From_AccountHeadurl ? e.GroupInfo.From_AccountHeadurl : null), e.From_Account == re.identifier ? (r = !0, e.From_Account, s = "") : (r = !1, e.From_Account, s = "");
				var f = Xe.sessByTypeId(M.GROUP, c);
				f || (f = new He(M.GROUP, c, l, s, 0, 0)), void 0 !== o && f.isFinished(o || 0);
				var g = L.COMMON;
				if(G.GROUP_TIP == e.Event || G.GROUP_TIP2 == e.Event) {
					g = L.TIP;
					var p = e.MsgBody;
					e.MsgBody = [], e.MsgBody.push({
						MsgType: v.GROUP_TIP,
						MsgContent: p
					})
				} else e.MsgPriority && (e.MsgPriority == U ? g = L.REDPACKET : e.MsgPriority == P && (g = L.LOVEMSG));
				var d = new Ye(f, r, e.MsgSeq, e.MsgRandom, e.MsgTimeStamp, e.From_Account, g, u, a),
					m = null,
					h = null,
					I = null;
				for(var y in e.MsgBody) {
					switch(I = (m = e.MsgBody[y]).MsgType) {
						case v.TEXT:
							h = new Ye.Elem.Text(m.MsgContent.Text);
							break;
						case v.FACE:
							h = new Ye.Elem.Face(m.MsgContent.Index, m.MsgContent.Data);
							break;
						case v.IMAGE:
							for(var _ in h = new Ye.Elem.Images(m.MsgContent.UUID, m.MsgContent.ImageFormat || ""), m.MsgContent.ImageInfoArray) h.addImage(new Ye.Elem.Images.Image(m.MsgContent.ImageInfoArray[_].Type, m.MsgContent.ImageInfoArray[_].Size, m.MsgContent.ImageInfoArray[_].Width, m.MsgContent.ImageInfoArray[_].Height, m.MsgContent.ImageInfoArray[_].URL));
							break;
						case v.SOUND:
							m.MsgContent ? h = new Ye.Elem.Sound(m.MsgContent.UUID, m.MsgContent.Second, m.MsgContent.Size, e.From_Account, e.To_Account, m.MsgContent.Download_Flag, M.GROUP) : (I = v.TEXT, h = new Ye.Elem.Text("[语音消息]下载地址解析出错"));
							break;
						case v.LOCATION:
							h = new Ye.Elem.Location(m.MsgContent.Longitude, m.MsgContent.Latitude, m.MsgContent.Desc);
							break;
						case v.FILE:
						case v.FILE + " ":
							I = v.FILE;
							be(m.MsgContent.UUID, e.From_Account, m.MsgContent.FileName);
							m.MsgContent ? h = new Ye.Elem.File(m.MsgContent.UUID, m.MsgContent.FileName, m.MsgContent.FileSize, e.From_Account, e.To_Account, m.MsgContent.Download_Flag, M.GROUP) : (I = v.TEXT, h = new Ye.Elem.Text("[文件消息]地址解析出错"));
							break;
						case v.GROUP_TIP:
							var E = m.MsgContent.OpType;
							if(h = new Ye.Elem.GroupTip(E, m.MsgContent.Operator_Account, c, e.GroupInfo.GroupName, m.MsgContent.List_Account), k.JOIN == E || k.QUIT == E) h.setGroupMemberNum(m.MsgContent.MemberNum);
							else if(k.MODIFY_GROUP_INFO == E) {
								var T = !1,
									C = {
										GroupId: c,
										GroupFaceUrl: null,
										GroupName: null,
										OwnerAccount: null,
										GroupNotification: null,
										GroupIntroduction: null
									},
									A = m.MsgContent.MsgGroupNewInfo;
								if(A.GroupFaceUrl) {
									var S = new Ye.Elem.GroupTip.GroupInfo(D.FACE_URL, A.GroupFaceUrl);
									h.addGroupInfo(S), T = !0, C.GroupFaceUrl = A.GroupFaceUrl
								}
								if(A.GroupName) {
									var b = new Ye.Elem.GroupTip.GroupInfo(D.NAME, A.GroupName);
									h.addGroupInfo(b), T = !0, C.GroupName = A.GroupName
								}
								if(A.Owner_Account) {
									var F = new Ye.Elem.GroupTip.GroupInfo(D.OWNER, A.Owner_Account);
									h.addGroupInfo(F), T = !0, C.OwnerAccount = A.Owner_Account
								}
								if(A.GroupNotification) {
									var N = new Ye.Elem.GroupTip.GroupInfo(D.NOTIFICATION, A.GroupNotification);
									h.addGroupInfo(N), T = !0, C.GroupNotification = A.GroupNotification
								}
								if(A.GroupIntroduction) {
									var O = new Ye.Elem.GroupTip.GroupInfo(D.INTRODUCTION, A.GroupIntroduction);
									h.addGroupInfo(O), T = !0, C.GroupIntroduction = A.GroupIntroduction
								}
								0 == n && T && t && t(C)
							} else if(k.MODIFY_MEMBER_INFO == E) {
								var R = m.MsgContent.MsgMemberInfo;
								for(var w in R) {
									var q = R[w];
									h.addMemberInfo(new Ye.Elem.GroupTip.MemberInfo(q.User_Account, q.ShutupTime))
								}
							}
							break;
						case v.CUSTOM:
							I = v.CUSTOM, h = new Ye.Elem.Custom(m.MsgContent.Data, m.MsgContent.Desc, m.MsgContent.Ext);
							break;
						default:
							I = v.TEXT, h = new Ye.Elem.Text("web端暂不支持" + m.MsgType + "消息")
					}
					d.elems.push(new Ye.Elem(I, h))
				}
				return 0 == i ? d : Xe.addMsg(d) ? d : null
			};
			this.init = function(s, u, a, c) {
				if(u.onMsgNotify || ye.warn("listeners.onMsgNotify is empty"), e = u.onMsgNotify, u.onBigGroupMsgNotify ? l = u.onBigGroupMsgNotify : ye.warn("listeners.onBigGroupMsgNotify is empty"), u.onC2cEventNotifys ? I = u.onC2cEventNotifys : ye.warn("listeners.onC2cEventNotifys is empty"), u.onGroupSystemNotifys ? n = u.onGroupSystemNotifys : ye.warn("listeners.onGroupSystemNotifys is empty"), u.onGroupInfoChangeNotify ? t = u.onGroupInfoChangeNotify : ye.warn("listeners.onGroupInfoChangeNotify is empty"), u.onFriendSystemNotifys ? i = u.onFriendSystemNotifys : ye.warn("listeners.onFriendSystemNotifys is empty"), u.onProfileSystemNotifys ? o = u.onProfileSystemNotifys : ye.warn("listeners.onProfileSystemNotifys is empty"), u.onKickedEventCall ? y = u.onKickedEventCall : ye.warn("listeners.onKickedEventCall is empty"), u.onTokenInvalid ? _ = u.onTokenInvalid : ye.warn("listeners.onTokenInvalid is empty"), u.onAppliedDownloadUrl ? u.onAppliedDownloadUrl : ye.warn("listeners.onAppliedDownloadUrl is empty"), re.identifier && re.userSig) ye.info("initMyGroupMaxSeqs success"), void S(s, function(e) {
					if(ye.info("initIpAndAuthkey success"), a) {
						ye.info("login success(have login state))");
						var t = {
							ActionStatus: E.OK,
							ErrorCode: 0,
							ErrorInfo: "login success"
						};
						a(t)
					}
					Qe.setLongPollingOn(!0), r && Qe.longPolling(a)
				}, c);
				else if(a) {
					var f = {
						ActionStatus: E.OK,
						ErrorCode: 0,
						ErrorInfo: "login success(no login state)"
					};
					a(f)
				}
			}, this.sendMsg = function(e, t, n) {
				! function(e, t, n) {
					if(Ce(n, !0)) {
						var i = null;
						switch(e.sess.type()) {
							case M.C2C:
								i = {
									From_Account: re.identifier,
									To_Account: e.sess.id().toString(),
									MsgTimeStamp: e.time,
									MsgSeq: e.seq,
									MsgRandom: e.random,
									MsgBody: []
								};
								break;
							case M.GROUP:
								var o = e.getSubType();
								switch(i = {
									GroupId: e.sess.id().toString(),
									From_Account: re.identifier,
									Random: e.random,
									MsgBody: []
								}, o) {
									case L.COMMON:
										i.MsgPriority = "COMMON";
										break;
									case L.REDPACKET:
										i.MsgPriority = "REDPACKET";
										break;
									case L.LOVEMSG:
										i.MsgPriority = "LOVEMSG";
										break;
									case L.TIP:
										ye.error("不能主动发送群提示消息,subType=" + o);
										break;
									default:
										return void ye.error("发送群消息时，出现未知子消息类型：subType=" + o)
								}
						}
						for(var r in e.elems) {
							var s = e.elems[r],
								u = null,
								l = s.type;
							switch(l) {
								case v.TEXT:
									u = {
										Text: s.content.text
									};
									break;
								case v.FACE:
									u = {
										Index: s.content.index,
										Data: s.content.data
									};
									break;
								case v.IMAGE:
									var f = [];
									for(var g in s.content.ImageInfoArray) f.push({
										Type: s.content.ImageInfoArray[g].type,
										Size: s.content.ImageInfoArray[g].size,
										Width: s.content.ImageInfoArray[g].width,
										Height: s.content.ImageInfoArray[g].height,
										URL: s.content.ImageInfoArray[g].url
									});
									u = {
										ImageFormat: s.content.ImageFormat,
										UUID: s.content.UUID,
										ImageInfoArray: f
									};
									break;
								case v.SOUND:
									ye.warn("web端暂不支持发送语音消息");
									continue;
								case v.LOCATION:
									ye.warn("web端暂不支持发送地理位置消息");
									continue;
								case v.FILE:
									u = {
										UUID: s.content.uuid,
										FileName: s.content.name,
										FileSize: s.content.size,
										DownloadFlag: s.content.downFlag
									};
									break;
								case v.CUSTOM:
									u = {
										Data: s.content.data,
										Desc: s.content.desc,
										Ext: s.content.ext
									}, l = v.CUSTOM;
									break;
								default:
									ye.warn("web端暂不支持发送" + s.type + "消息");
									continue
							}
							e.PushInfoBoolean && (i.OfflinePushInfo = e.PushInfo), i.MsgBody.push({
								MsgType: l,
								MsgContent: u
							})
						}
						e.sess.type() == M.C2C ? ze.apiCall(a, "sendmsg", i, t, n) : e.sess.type() == M.GROUP && ze.apiCall(c, "send_group_msg", i, t, n)
					}
				}(e, function(i) {
					if(e.sess.type() == M.C2C) {
						if(!Xe.addMsg(e)) {
							var o = "sendMsg: addMsg failed!",
								r = Ie.getReturnError(o, -17);
							return ye.error(o), void(n && n(r))
						}
						Xe.updateTimeline()
					}
					t && t(i)
				}, function(e) {
					n && n(e)
				})
			}
		},
		We = new function() {
			this.fileMd5 = null;
			this.submitUploadFileForm = function(e, t, n) {
				var i, o, r = e.formId,
					s = e.fileId,
					u = "uploadResultIframe_" + te++,
					a = e.To_Account,
					c = e.businessType,
					l = document.getElementById(r);
				if(!l) return i = "获取表单对象为空: formId=" + r + "(formId非法)", o = Ie.getReturnError(i, -20), void(n && n(o));
				var f = document.getElementById(s);
				if(!f) return i = "获取文件对象为空: fileId=" + s + "(没有选择文件或者fileId非法)", o = Ie.getReturnError(i, -21), void(n && n(o));
				f.name = "file";
				var g = document.createElement("iframe");
				g.name = u, g.id = u, g.style.display = "none", document.body.appendChild(g);
				var p = "https://pic.tim.qq.com/v4/openpic/" + (Ae() ? "pic_up" : "pic_up_test") + "?tinyid=" + re.tinyid + "&a2=" + re.a2 + "&sdkappid=" + re.sdkAppID + "&contenttype=http&accounttype=" + re.accountType;

				function d(e, t) {
					var n = document.createElement("input");
					n.type = "hidden", n.name = e, n.value = t, l.appendChild(n)
				}
				l.action = p, l.method = "post", l.target = u, d("App_Version", O.APP_VERSION), d("From_Account", re.identifier), d("To_Account", a), d("Seq", Me().toString()), d("Timestamp", _e().toString()), d("Random", Ee().toString()), d("Busi_Id", c), d("PkgFlag", A.RAW_DATA.toString()), d("Auth_Key", ie), d("Server_Ver", O.SERVER_VERSION.toString()), d("File_Type", e.fileType), setTimeout(function e() {
					var i;
					try {
						i = JSON.parse(g.contentWindow.name) || {}
					} catch(e) {
						i = {}
					}
					i.ActionStatus ? (g.src = "about:blank", g.parentNode.removeChild(g), g = null, i.ActionStatus == E.OK ? t && t(i) : n && n(i)) : setTimeout(e, 100)
				}, 500), l.submit()
			}, this.uploadFile = function(e, t, n) {
				var i = {
					init: function(e, t, n) {
						var i = this;
						i.file = e.file, i.onProgressCallBack = e.onProgressCallBack, e.abortButton && (e.abortButton.onclick = i.abortHandler), i.total = i.file.size, i.loaded = 0, i.step = 1105920, i.sliceSize = 0, i.sliceOffset = 0, i.timestamp = _e(), i.seq = Me(), i.random = Ee(), i.fromAccount = re.identifier, i.toAccount = e.To_Account, i.fileMd5 = e.fileMd5, i.businessType = e.businessType, i.fileType = e.fileType, i.cbOk = t, i.cbErr = n, i.reader = new FileReader, i.blobSlice = File.prototype.mozSlice || File.prototype.webkitSlice || File.prototype.slice, i.reader.onloadstart = i.onLoadStart, i.reader.onprogress = i.onProgress, i.reader.onabort = i.onAbort, i.reader.onerror = i.onerror, i.reader.onload = i.onLoad, i.reader.onloadend = i.onLoadEnd
					},
					upload: function() {
						i.readBlob(0)
					},
					onLoadStart: function() {},
					onProgress: function(e) {
						var t = i;
						t.loaded += e.loaded, t.onProgressCallBack && t.onProgressCallBack(t.loaded, t.total)
					},
					onAbort: function() {},
					onError: function() {},
					onLoad: function(e) {
						var t = i;
						if(e.target.readyState == FileReader.DONE) {
							var n = e.target.result,
								o = n.indexOf(","); - 1 != o && (n = n.substr(o + 1));
							var r = {
									From_Account: t.fromAccount,
									To_Account: t.toAccount,
									Busi_Id: t.businessType,
									File_Type: t.fileType,
									File_Str_Md5: t.fileMd5,
									PkgFlag: A.BASE64_DATA,
									File_Size: t.total,
									Slice_Offset: t.sliceOffset,
									Slice_Size: t.sliceSize,
									Slice_Data: n,
									Seq: t.seq,
									Timestamp: t.timestamp,
									Random: t.random
								},
								s = function(e) {
									if(0 == e.IsFinish) t.loaded = e.Next_Offset, t.loaded < t.total ? t.readBlob(t.loaded) : t.loaded = t.total;
									else if(t.cbOk) {
										var n = {
											ActionStatus: e.ActionStatus,
											ErrorCode: e.ErrorCode,
											ErrorInfo: e.ErrorInfo,
											File_UUID: e.File_UUID,
											File_Size: e.Next_Offset,
											URL_INFO: e.URL_INFO,
											Download_Flag: e.Download_Flag
										};
										t.fileType == N.FILE && (n.URL_INFO = be(e.File_UUID, re.identifier, t.file.name)), t.cbOk(n)
									}
									W = 0
								},
								u = function(e) {
									W < 20 ? (W++, setTimeout(function() {
										xe(r, s, u)
									}, 1e3)) : t.cbErr(e)
								};
							xe(r, s, u)
						}
					},
					onLoadEnd: function() {},
					readBlob: function(e) {
						var t, n = i,
							o = n.file,
							r = e + n.step;
						r > n.total ? (r = n.total, n.sliceSize = r - e) : n.sliceSize = n.step, n.sliceOffset = e, t = n.blobSlice.call(o, e, r), n.reader.readAsDataURL(t)
					},
					abortHandler: function() {
						var e = i;
						e.reader && e.reader.abort()
					}
				};
				! function(e, t, n) {
					var i = null;
					try {
						i = new FileReader
					} catch(e) {
						if(n) return void n(Ie.getReturnError("当前浏览器不支持FileReader", -18))
					}
					var o = File.prototype.mozSlice || File.prototype.webkitSlice || File.prototype.slice;
					if(o || !n) {
						var r = 2097152,
							s = Math.ceil(e.size / r),
							u = 0,
							a = new SparkMD5;
						i.onload = function(e) {
							for(var n = "", i = new Uint8Array(e.target.result), o = i.byteLength, r = 0; r < o; r++) n += String.fromCharCode(i[r]);
							a.appendBinary(n), ++u < s ? c() : (this.fileMd5 = a.end(), t && t(this.fileMd5))
						}, c()
					} else n(Ie.getReturnError("当前浏览器不支持FileAPI", -19));

					function c() {
						var t = u * r,
							n = t + r >= e.size ? e.size : t + r,
							s = o.call(e, t, n);
						i.readAsArrayBuffer(s)
					}
				}(e.file, function(o) {
					ye.info("fileMd5: " + o), e.fileMd5 = o, i.init(e, t, n), i.upload()
				}, n)
			}
		};
	e.SESSION_TYPE = M, e.MSG_MAX_LENGTH = {
		C2C: 12e3,
		GROUP: 8898
	}, e.C2C_MSG_SUB_TYPE = {
		COMMON: 0
	}, e.GROUP_MSG_SUB_TYPE = L, e.MSG_ELEMENT_TYPE = v, e.GROUP_TIP_TYPE = k, e.IMAGE_TYPE = T, e.GROUP_SYSTEM_TYPE = q, e.FRIEND_NOTICE_TYPE = x, e.GROUP_TIP_MODIFY_GROUP_INFO_TYPE = D, e.BROWSER_INFO = s, e.Emotions = e.EmotionPicData = he, e.EmotionDataIndexs = e.EmotionPicDataIndex = de, e.TLS_ERROR_CODE = {
		OK: 0,
		SIGNATURE_EXPIRATION: 11
	}, e.CONNECTION_STATUS = K, e.UPLOAD_PIC_BUSSINESS_TYPE = {
		GROUP_MSG: 1,
		C2C_MSG: 2,
		USER_HEAD: 3,
		GROUP_HEAD: 4
	}, e.RECENT_CONTACT_TYPE = {
		C2C: 1,
		GROUP: 2
	}, e.UPLOAD_RES_TYPE = N, e.Tool = Ie, e.Log = ye, e.Msg = Ye, e.Session = He, e.MsgStore = {
		sessMap: function() {
			return Xe.sessMap()
		},
		sessCount: function() {
			return Xe.sessCount()
		},
		sessByTypeId: function(e, t) {
			return Xe.sessByTypeId(e, t)
		},
		delSessByTypeId: function(e, t) {
			return Xe.delSessByTypeId(e, t)
		},
		resetCookieAndSyncFlag: function() {
			return Xe.resetCookieAndSyncFlag()
		}
	}, e.Resources = pe, e.login = e.init = function(t, n, i, r, s) {
		var u, a, c, l, f;
		ze.init(n.onConnNotify, r, s), n.jsonpCallback && (ee = n.jsonpCallback), u = t, a = n, c = i, l = r, f = s, Ne(), c && (se = c), "false" == e.Tool.getQueryString("isAccessFormalEnv") && (o = !1, ye.error("请切换为正式环境")), 0 == se.isAccessFormalEnv && (ye.error("请切换为正式环境"), o = se.isAccessFormalEnv), 0 == se.isLogOn && ye.setOn(se.isLogOn), u || !f ? u.sdkAppID || !f ? u.accountType || !f ? (u.identifier && (re.identifier = u.identifier.toString()), u.identifier && !u.userSig && f ? f(Ie.getReturnError("loginInfo.userSig is empty", -9)) : (u.userSig && (re.userSig = u.userSig.toString()), re.sdkAppID = u.sdkAppID, re.accountType = u.accountType, re.identifier && re.userSig ? Ge(u, function(e, t) {
			Qe.init(u, a, function(n) {
				l && (n.identifierNick = e, n.headurl = t, l(n))
			}, f)
		}, f) : Qe.init(a, l, f))) : f(Ie.getReturnError("loginInfo.accountType is empty", -8)) : f(Ie.getReturnError("loginInfo.sdkAppID is empty", -7)) : f(Ie.getReturnError("loginInfo is empty", -6))
	}, e.logout = e.offline = function(e, t) {
		return Re("instance", e, t)
	}, e.logoutAll = function(e, t) {
		return Re("all", e, t)
	}, e.sendMsg = function(e, t, n) {
		return Qe.sendMsg(e, t, n)
	}, e.syncMsgs = function(e, t) {
		return Qe.syncMsgs(e, t)
	}, e.getC2CHistoryMsgs = function(e, t, n) {
		return Qe.getC2CHistoryMsgs(e, t, n)
	}, e.syncGroupMsgs = function(e, t, n) {
		return Qe.syncGroupMsgs(e, t, n)
	}, e.c2CMsgReaded = function(e, t, n) {
		return Xe.c2CMsgReaded(e, t, n)
	}, e.groupMsgReaded = function(e, t, n) {
		return ke(e, t, n)
	}, e.setAutoRead = function(e, t, n) {
		return Xe.setAutoRead(e, t, n)
	}, e.createGroup = function(e, t, n) {
		return function(e, t, n) {
			if(Ce(n, !0)) {
				for(var i = {
						Type: e.Type,
						Name: e.Name
					}, o = [], r = 0; r < e.MemberList.length; r++) o.push({
					Member_Account: e.MemberList[r]
				});
				i.MemberList = o, e.GroupId && (i.GroupId = e.GroupId), e.Owner_Account && (i.Owner_Account = e.Owner_Account), e.Introduction && (i.Introduction = e.Introduction), e.Notification && (i.Notification = e.Notification), e.MaxMemberCount && (i.MaxMemberCount = e.MaxMemberCount), e.ApplyJoinOption && (i.ApplyJoinOption = e.ApplyJoinOption), e.AppDefinedData && (i.AppDefinedData = e.AppDefinedData), e.FaceUrl && (i.FaceUrl = e.FaceUrl), ze.apiCall(c, "create_group", i, t, n)
			}
		}(e, t, n)
	}, e.createGroupHigh = function(e, t, n) {
		return i = e, o = t, void(Ce(r = n, !0) && ze.apiCall(c, "create_group", i, o, r));
		var i, o, r
	}, e.applyJoinGroup = function(e, t, n) {
		return i = e, o = t, void(Ce(r = n, !0) && ze.apiCall(c, "apply_join_group", {
			GroupId: i.GroupId,
			ApplyMsg: i.ApplyMsg,
			UserDefinedField: i.UserDefinedField
		}, o, r));
		var i, o, r
	}, e.handleApplyJoinGroupPendency = function(e, t, n) {
		return i = e, o = t, void(Ce(r = n, !0) && ze.apiCall(c, "handle_apply_join_group", {
			GroupId: i.GroupId,
			Applicant_Account: i.Applicant_Account,
			HandleMsg: i.HandleMsg,
			Authentication: i.Authentication,
			MsgKey: i.MsgKey,
			ApprovalMsg: i.ApprovalMsg,
			UserDefinedField: i.UserDefinedField
		}, o, function(e) {
			if(10024 == e.ErrorCode) {
				if(o) {
					var t = {
						ActionStatus: E.OK,
						ErrorCode: 0,
						ErrorInfo: "该申请已经被处理过"
					};
					o(t)
				}
			} else r && r(e)
		}));
		var i, o, r
	}, e.getPendencyGroup = function(e, t, n) {
		return i = e, o = t, void(Ce(n, !0) && ze.apiCall(c, "get_pendency", {
			StartTime: i.StartTime,
			Limit: i.Limit,
			Handle_Account: re.identifier
		}, o, function(e) {}));
		var i, o
	}, e.getPendencyGroupRead = function(e, t, n) {
		return i = e, o = t, void(Ce(n, !0) && ze.apiCall(c, "report_pendency", {
			ReportTime: i.ReportTime,
			From_Account: re.identifier
		}, o, function(e) {}));
		var i, o
	}, e.handleInviteJoinGroupRequest = function(e, t, n) {
		return i = e, o = t, void(Ce(n, !0) && ze.apiCall(c, "handle_invite_join_group", {
			GroupId: i.GroupId,
			Inviter_Account: i.Inviter_Account,
			HandleMsg: i.HandleMsg,
			Authentication: i.Authentication,
			MsgKey: i.MsgKey,
			ApprovalMsg: i.ApprovalMsg,
			UserDefinedField: i.UserDefinedField
		}, o, function(e) {}));
		var i, o
	}, e.deleteApplyJoinGroupPendency = function(e, t, n) {
		return i = e, o = t, void(Ce(r = n, !0) && ze.apiCall(a, "deletemsg", i, o, r));
		var i, o, r
	}, e.quitGroup = function(e, t, n) {
		return i = e, o = t, void(Ce(r = n, !0) && ze.apiCall(c, "quit_group", {
			GroupId: i.GroupId
		}, o, r));
		var i, o, r
	}, e.searchGroupByName = function(e, t, n) {
		return i = e, o = t, r = n, void ze.apiCall(c, "search_group", i, o, r);
		var i, o, r
	}, e.getGroupPublicInfo = function(e, t, n) {
		return i = e, o = t, void(Ce(r = n, !0) && ze.apiCall(c, "get_group_public_info", {
			GroupIdList: i.GroupIdList,
			ResponseFilter: {
				GroupBasePublicInfoFilter: i.GroupBasePublicInfoFilter
			}
		}, function(e) {
			if(e.ErrorInfo = "", e.GroupInfo)
				for(var t in e.GroupInfo) {
					var n = e.GroupInfo[t].ErrorCode;
					n > 0 && (e.ActionStatus = E.FAIL, e.GroupInfo[t].ErrorInfo = "[" + n + "]" + e.GroupInfo[t].ErrorInfo, e.ErrorInfo += e.GroupInfo[t].ErrorInfo + "\n")
				}
			e.ActionStatus == E.FAIL ? r && r(e) : o && o(e)
		}, r));
		var i, o, r
	}, e.getGroupInfo = function(e, t, n) {
		return function(e, t, n) {
			if(Ce(n, !0)) {
				var i = {
					GroupIdList: e.GroupIdList,
					ResponseFilter: {
						GroupBaseInfoFilter: e.GroupBaseInfoFilter,
						MemberInfoFilter: e.MemberInfoFilter
					}
				};
				e.AppDefinedDataFilter_Group && (i.ResponseFilter.AppDefinedDataFilter_Group = e.AppDefinedDataFilter_Group), e.AppDefinedDataFilter_GroupMember && (i.ResponseFilter.AppDefinedDataFilter_GroupMember = e.AppDefinedDataFilter_GroupMember), ze.apiCall(c, "get_group_info", i, t, n)
			}
		}(e, t, n)
	}, e.modifyGroupBaseInfo = function(e, t, n) {
		return i = e, o = t, void(Ce(r = n, !0) && ze.apiCall(c, "modify_group_base_info", i, o, r));
		var i, o, r
	}, e.getGroupMemberInfo = function(e, t, n) {
		return i = e, o = t, void(Ce(r = n, !0) && ze.apiCall(c, "get_group_member_info", {
			GroupId: i.GroupId,
			Offset: i.Offset,
			Limit: i.Limit,
			MemberInfoFilter: i.MemberInfoFilter,
			MemberRoleFilter: i.MemberRoleFilter,
			AppDefinedDataFilter_GroupMember: i.AppDefinedDataFilter_GroupMember
		}, o, r));
		var i, o, r
	}, e.addGroupMember = function(e, t, n) {
		return i = e, o = t, void(Ce(r = n, !0) && ze.apiCall(c, "add_group_member", {
			GroupId: i.GroupId,
			Silence: i.Silence,
			MemberList: i.MemberList
		}, o, r));
		var i, o, r
	}, e.modifyGroupMember = function(e, t, n) {
		return function(e, t, n) {
			if(Ce(n, !0)) {
				var i = {};
				e.GroupId && (i.GroupId = e.GroupId), e.Member_Account && (i.Member_Account = e.Member_Account), e.Role && (i.Role = e.Role), e.MsgFlag && (i.MsgFlag = e.MsgFlag), e.ShutUpTime && (i.ShutUpTime = e.ShutUpTime), e.NameCard && (i.NameCard = e.NameCard), e.AppMemberDefinedData && (i.AppMemberDefinedData = e.AppMemberDefinedData), ze.apiCall(c, "modify_group_member_info", i, t, n)
			}
		}(e, t, n)
	}, e.deleteGroupMember = function(e, t, n) {
		return i = e, o = t, void(Ce(r = n, !0) && ze.apiCall(c, "delete_group_member", {
			GroupId: i.GroupId,
			Silence: i.Silence,
			MemberToDel_Account: i.MemberToDel_Account,
			Reason: i.Reason
		}, o, r));
		var i, o, r
	}, e.destroyGroup = function(e, t, n) {
		return i = e, o = t, void(Ce(r = n, !0) && ze.apiCall(c, "destroy_group", {
			GroupId: i.GroupId
		}, o, r));
		var i, o, r
	}, e.changeGroupOwner = function(e, t, n) {
		return i = e, o = t, void(Ce(r = n, !0) && ze.apiCall(c, "change_group_owner", i, o, r));
		var i, o, r
	}, e.getJoinedGroupListHigh = function(e, t, n) {
		return i = e, o = t, void(Ce(r = n, !0) && ze.apiCall(c, "get_joined_group_list", {
			Member_Account: i.Member_Account,
			Limit: i.Limit,
			Offset: i.Offset,
			GroupType: i.GroupType,
			ResponseFilter: {
				GroupBaseInfoFilter: i.GroupBaseInfoFilter,
				SelfInfoFilter: i.SelfInfoFilter
			}
		}, o, r));
		var i, o, r
	}, e.getRoleInGroup = function(e, t, n) {
		return i = e, o = t, void(Ce(r = n, !0) && ze.apiCall(c, "get_role_in_group", {
			GroupId: i.GroupId,
			User_Account: i.User_Account
		}, o, r));
		var i, o, r
	}, e.forbidSendMsg = function(e, t, n) {
		return i = e, o = t, void(Ce(r = n, !0) && ze.apiCall(c, "forbid_send_msg", {
			GroupId: i.GroupId,
			Members_Account: i.Members_Account,
			ShutUpTime: i.ShutUpTime
		}, o, r));
		var i, o, r
	}, e.sendCustomGroupNotify = function(e, t, n) {
		return i = e, o = t, void(Ce(r = n, !0) && ze.apiCall(c, "send_group_system_notification", i, o, r));
		var i, o, r
	}, e.applyJoinBigGroup = function(e, t, n) {
		return i = e, o = t, s = Ce(r = n, !1) ? c : d, void ze.apiCall(s, "apply_join_group", {
			GroupId: i.GroupId,
			ApplyMsg: i.ApplyMsg,
			UserDefinedField: i.UserDefinedField
		}, function(e) {
			if(e.JoinedStatus && "JoinedSuccess" == e.JoinedStatus) {
				if(!e.LongPollingKey) return void(r && r(Ie.getReturnError("Join Group succeed; But the type of group is not AVChatRoom: groupid=" + i.GroupId, -12)));
				Qe.setBigGroupLongPollingOn(!0), Qe.setBigGroupLongPollingKey(i.GroupId, e.LongPollingKey), Qe.setBigGroupLongPollingMsgMap(i.GroupId, 0), Qe.bigGroupLongPolling(i.GroupId)
			}
			o && o(e)
		}, function(e) {
			r && r(e)
		});
		var i, o, r, s
	}, e.quitBigGroup = function(e, t, n) {
		return i = e, o = t, s = Ce(r = n, !1) ? c : d, void ze.apiCall(s, "quit_group", {
			GroupId: i.GroupId
		}, function(e) {
			Qe.resetBigGroupLongPollingInfo(), o && o(e)
		}, r);
		var i, o, r, s
	}, e.getProfilePortrait = function(e, t, n) {
		return qe(e, t, n)
	}, e.setProfilePortrait = function(e, t, n) {
		return i = e, o = t, void(Ce(r = n, !0) && ze.apiCall(f, "portrait_set", {
			From_Account: re.identifier,
			ProfileItem: i.ProfileItem
		}, function(e) {
			for(var t in i.ProfileItem) {
				var n = i.ProfileItem[t];
				if("Tag_Profile_IM_Nick" == n.Tag) {
					re.identifierNick = n.Value;
					break
				}
			}
			o && o(e)
		}, r));
		var i, o, r
	}, e.applyAddFriend = function(e, t, n) {
		return i = e, o = t, void(Ce(r = n, !0) && ze.apiCall(l, "friend_add", {
			From_Account: re.identifier,
			AddFriendItem: i.AddFriendItem
		}, function(e) {
			var t = De(e);
			t.ActionStatus == E.FAIL ? r && r(t) : o && o(t)
		}, r));
		var i, o, r
	}, e.getPendency = function(e, t, n) {
		return i = e, o = t, void(Ce(r = n, !0) && ze.apiCall(l, "pendency_get", {
			From_Account: re.identifier,
			PendencyType: i.PendencyType,
			StartTime: i.StartTime,
			MaxLimited: i.MaxLimited,
			LastSequence: i.LastSequence
		}, o, r));
		var i, o, r
	}, e.getPendencyReport = function(e, t, n) {
		return i = e, o = t, void(Ce(r = n, !0) && ze.apiCall(l, "PendencyReport", {
			From_Account: re.identifier,
			LatestPendencyTimeStamp: i.LatestPendencyTimeStamp
		}, o, r));
		var i, o, r
	}, e.deletePendency = function(e, t, n) {
		return i = e, o = t, void(Ce(r = n, !0) && ze.apiCall(l, "pendency_delete", {
			From_Account: re.identifier,
			PendencyType: i.PendencyType,
			To_Account: i.To_Account
		}, function(e) {
			var t = De(e);
			t.ActionStatus == E.FAIL ? r && r(t) : o && o(t)
		}, r));
		var i, o, r
	}, e.responseFriend = function(e, t, n) {
		return i = e, o = t, void(Ce(r = n, !0) && ze.apiCall(l, "friend_response", {
			From_Account: re.identifier,
			ResponseFriendItem: i.ResponseFriendItem
		}, function(e) {
			var t = De(e);
			t.ActionStatus == E.FAIL ? r && r(t) : o && o(t)
		}, r));
		var i, o, r
	}, e.getAllFriend = function(e, t, n) {
		return i = e, o = t, void(Ce(r = n, !0) && ze.apiCall(l, "friend_get_all", {
			From_Account: re.identifier,
			TimeStamp: i.TimeStamp,
			StartIndex: i.StartIndex,
			GetCount: i.GetCount,
			LastStandardSequence: i.LastStandardSequence,
			TagList: i.TagList
		}, o, r));
		var i, o, r
	}, e.deleteChat = function(e, t, n) {
		return i = e, o = t, void(Ce(r = n, !0) && (1 == i.chatType ? ze.apiCall(I, "delete", {
			From_Account: re.identifier,
			Type: i.chatType,
			To_Account: i.To_Account
		}, o, r) : ze.apiCall(I, "delete", {
			From_Account: re.identifier,
			Type: i.chatType,
			ToGroupid: i.To_Account
		}, o, r)));
		var i, o, r
	}, e.deleteFriend = function(e, t, n) {
		return i = e, o = t, void(Ce(r = n, !0) && ze.apiCall(l, "friend_delete", {
			From_Account: re.identifier,
			To_Account: i.To_Account,
			DeleteType: i.DeleteType
		}, function(e) {
			var t = De(e);
			t.ActionStatus == E.FAIL ? r && r(t) : o && o(t)
		}, r));
		var i, o, r
	}, e.addBlackList = function(e, t, n) {
		return i = e, o = t, void(Ce(r = n, !0) && ze.apiCall(l, "black_list_add", {
			From_Account: re.identifier,
			To_Account: i.To_Account
		}, function(e) {
			var t = De(e);
			t.ActionStatus == E.FAIL ? r && r(t) : o && o(t)
		}, r));
		var i, o, r
	}, e.deleteBlackList = function(e, t, n) {
		return i = e, o = t, void(Ce(r = n, !0) && ze.apiCall(l, "black_list_delete", {
			From_Account: re.identifier,
			To_Account: i.To_Account
		}, function(e) {
			var t = De(e);
			t.ActionStatus == E.FAIL ? r && r(t) : o && o(t)
		}, r));
		var i, o, r
	}, e.getBlackList = function(e, t, n) {
		return i = e, o = t, void(Ce(r = n, !0) && ze.apiCall(l, "black_list_get", {
			From_Account: re.identifier,
			StartIndex: i.StartIndex,
			MaxLimited: i.MaxLimited,
			LastSequence: i.LastSequence
		}, o, r));
		var i, o, r
	}, e.getRecentContactList = function(e, t, n) {
		return i = e, o = t, void(Ce(r = n, !0) && ze.apiCall(g, "get", {
			From_Account: re.identifier,
			Count: i.Count
		}, o, r));
		var i, o, r
	}, e.uploadFile = e.uploadPic = function(e, t, n) {
		return We.uploadFile(e, t, n)
	}, e.submitUploadFileForm = function(e, t, n) {
		return We.submitUploadFileForm(e, t, n)
	}, e.uploadFileByBase64 = e.uploadPicByBase64 = function(e, t, n) {
		var i = {
			To_Account: e.toAccount,
			Busi_Id: e.businessType,
			File_Type: e.File_Type,
			File_Str_Md5: e.fileMd5,
			PkgFlag: A.BASE64_DATA,
			File_Size: e.totalSize,
			Slice_Offset: 0,
			Slice_Size: e.totalSize,
			Slice_Data: e.base64Str,
			Seq: Me(),
			Timestamp: _e(),
			Random: Ee()
		};
		return xe(i, t, n)
	}, e.setJsonpLastRspData = function(e) {
		Z = "string" == typeof e ? JSON.parse(e) : e
	}, e.getLongPollingId = function(e, t, n) {
		return Ke(0, t, n)
	}, e.applyDownload = function(e, t, n) {
		return Je(e, t, n)
	}, e.onDownFile = function(e) {
		window.open(pe.downloadMap["uuid_" + e])
	}, e.checkLogin = function(e, t) {
		return Ce(e, t)
	}
}(webim),
function(e) {
	if("object" == typeof exports) module.exports = e();
	else if("function" == typeof define && define.amd) define(e);
	else {
		var t;
		try {
			t = window
		} catch(e) {
			t = self
		}
		t.SparkMD5 = e()
	}
}(function(e) {
	"use strict";
	var t = function(e, t) {
			return e + t & 4294967295
		},
		n = function(e, n, i, o, r, s) {
			return n = t(t(n, e), t(o, s)), t(n << r | n >>> 32 - r, i)
		},
		i = function(e, t, i, o, r, s, u) {
			return n(t & i | ~t & o, e, t, r, s, u)
		},
		o = function(e, t, i, o, r, s, u) {
			return n(t & o | i & ~o, e, t, r, s, u)
		},
		r = function(e, t, i, o, r, s, u) {
			return n(t ^ i ^ o, e, t, r, s, u)
		},
		s = function(e, t, i, o, r, s, u) {
			return n(i ^ (t | ~o), e, t, r, s, u)
		},
		u = function(e, n) {
			var u = e[0],
				a = e[1],
				c = e[2],
				l = e[3];
			u = i(u, a, c, l, n[0], 7, -680876936), l = i(l, u, a, c, n[1], 12, -389564586), c = i(c, l, u, a, n[2], 17, 606105819), a = i(a, c, l, u, n[3], 22, -1044525330), u = i(u, a, c, l, n[4], 7, -176418897), l = i(l, u, a, c, n[5], 12, 1200080426), c = i(c, l, u, a, n[6], 17, -1473231341), a = i(a, c, l, u, n[7], 22, -45705983), u = i(u, a, c, l, n[8], 7, 1770035416), l = i(l, u, a, c, n[9], 12, -1958414417), c = i(c, l, u, a, n[10], 17, -42063), a = i(a, c, l, u, n[11], 22, -1990404162), u = i(u, a, c, l, n[12], 7, 1804603682), l = i(l, u, a, c, n[13], 12, -40341101), c = i(c, l, u, a, n[14], 17, -1502002290), a = i(a, c, l, u, n[15], 22, 1236535329), u = o(u, a, c, l, n[1], 5, -165796510), l = o(l, u, a, c, n[6], 9, -1069501632), c = o(c, l, u, a, n[11], 14, 643717713), a = o(a, c, l, u, n[0], 20, -373897302), u = o(u, a, c, l, n[5], 5, -701558691), l = o(l, u, a, c, n[10], 9, 38016083), c = o(c, l, u, a, n[15], 14, -660478335), a = o(a, c, l, u, n[4], 20, -405537848), u = o(u, a, c, l, n[9], 5, 568446438), l = o(l, u, a, c, n[14], 9, -1019803690), c = o(c, l, u, a, n[3], 14, -187363961), a = o(a, c, l, u, n[8], 20, 1163531501), u = o(u, a, c, l, n[13], 5, -1444681467), l = o(l, u, a, c, n[2], 9, -51403784), c = o(c, l, u, a, n[7], 14, 1735328473), a = o(a, c, l, u, n[12], 20, -1926607734), u = r(u, a, c, l, n[5], 4, -378558), l = r(l, u, a, c, n[8], 11, -2022574463), c = r(c, l, u, a, n[11], 16, 1839030562), a = r(a, c, l, u, n[14], 23, -35309556), u = r(u, a, c, l, n[1], 4, -1530992060), l = r(l, u, a, c, n[4], 11, 1272893353), c = r(c, l, u, a, n[7], 16, -155497632), a = r(a, c, l, u, n[10], 23, -1094730640), u = r(u, a, c, l, n[13], 4, 681279174), l = r(l, u, a, c, n[0], 11, -358537222), c = r(c, l, u, a, n[3], 16, -722521979), a = r(a, c, l, u, n[6], 23, 76029189), u = r(u, a, c, l, n[9], 4, -640364487), l = r(l, u, a, c, n[12], 11, -421815835), c = r(c, l, u, a, n[15], 16, 530742520), a = r(a, c, l, u, n[2], 23, -995338651), u = s(u, a, c, l, n[0], 6, -198630844), l = s(l, u, a, c, n[7], 10, 1126891415), c = s(c, l, u, a, n[14], 15, -1416354905), a = s(a, c, l, u, n[5], 21, -57434055), u = s(u, a, c, l, n[12], 6, 1700485571), l = s(l, u, a, c, n[3], 10, -1894986606), c = s(c, l, u, a, n[10], 15, -1051523), a = s(a, c, l, u, n[1], 21, -2054922799), u = s(u, a, c, l, n[8], 6, 1873313359), l = s(l, u, a, c, n[15], 10, -30611744), c = s(c, l, u, a, n[6], 15, -1560198380), a = s(a, c, l, u, n[13], 21, 1309151649), u = s(u, a, c, l, n[4], 6, -145523070), l = s(l, u, a, c, n[11], 10, -1120210379), c = s(c, l, u, a, n[2], 15, 718787259), a = s(a, c, l, u, n[9], 21, -343485551), e[0] = t(u, e[0]), e[1] = t(a, e[1]), e[2] = t(c, e[2]), e[3] = t(l, e[3])
		},
		a = function(e) {
			var t, n = [];
			for(t = 0; t < 64; t += 4) n[t >> 2] = e.charCodeAt(t) + (e.charCodeAt(t + 1) << 8) + (e.charCodeAt(t + 2) << 16) + (e.charCodeAt(t + 3) << 24);
			return n
		},
		c = function(e) {
			var t, n = [];
			for(t = 0; t < 64; t += 4) n[t >> 2] = e[t] + (e[t + 1] << 8) + (e[t + 2] << 16) + (e[t + 3] << 24);
			return n
		},
		l = function(e) {
			var t, n, i, o, r, s, c = e.length,
				l = [1732584193, -271733879, -1732584194, 271733878];
			for(t = 64; t <= c; t += 64) u(l, a(e.substring(t - 64, t)));
			for(n = (e = e.substring(t - 64)).length, i = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], t = 0; t < n; t += 1) i[t >> 2] |= e.charCodeAt(t) << (t % 4 << 3);
			if(i[t >> 2] |= 128 << (t % 4 << 3), t > 55)
				for(u(l, i), t = 0; t < 16; t += 1) i[t] = 0;
			return o = (o = 8 * c).toString(16).match(/(.*?)(.{0,8})$/), r = parseInt(o[2], 16), s = parseInt(o[1], 16) || 0, i[14] = r, i[15] = s, u(l, i), l
		},
		f = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "a", "b", "c", "d", "e", "f"],
		g = function(e) {
			var t, n = "";
			for(t = 0; t < 4; t += 1) n += f[e >> 8 * t + 4 & 15] + f[e >> 8 * t & 15];
			return n
		},
		p = function(e) {
			var t;
			for(t = 0; t < e.length; t += 1) e[t] = g(e[t]);
			return e.join("")
		},
		d = function() {
			this.reset()
		};
	return "5d41402abc4b2a76b9719d911017c592" !== p(l("hello")) && (t = function(e, t) {
		var n = (65535 & e) + (65535 & t);
		return(e >> 16) + (t >> 16) + (n >> 16) << 16 | 65535 & n
	}), d.prototype.append = function(e) {
		return /[\u0080-\uFFFF]/.test(e) && (e = unescape(encodeURIComponent(e))), this.appendBinary(e), this
	}, d.prototype.appendBinary = function(e) {
		this._buff += e, this._length += e.length;
		var t, n = this._buff.length;
		for(t = 64; t <= n; t += 64) u(this._state, a(this._buff.substring(t - 64, t)));
		return this._buff = this._buff.substr(t - 64), this
	}, d.prototype.end = function(e) {
		var t, n, i = this._buff,
			o = i.length,
			r = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
		for(t = 0; t < o; t += 1) r[t >> 2] |= i.charCodeAt(t) << (t % 4 << 3);
		return this._finish(r, o), n = e ? this._state : p(this._state), this.reset(), n
	}, d.prototype._finish = function(e, t) {
		var n, i, o, r = t;
		if(e[r >> 2] |= 128 << (r % 4 << 3), r > 55)
			for(u(this._state, e), r = 0; r < 16; r += 1) e[r] = 0;
		n = (n = 8 * this._length).toString(16).match(/(.*?)(.{0,8})$/), i = parseInt(n[2], 16), o = parseInt(n[1], 16) || 0, e[14] = i, e[15] = o, u(this._state, e)
	}, d.prototype.reset = function() {
		return this._buff = "", this._length = 0, this._state = [1732584193, -271733879, -1732584194, 271733878], this
	}, d.prototype.destroy = function() {
		delete this._state, delete this._buff, delete this._length
	}, d.hash = function(e, t) {
		/[\u0080-\uFFFF]/.test(e) && (e = unescape(encodeURIComponent(e)));
		var n = l(e);
		return t ? n : p(n)
	}, d.hashBinary = function(e, t) {
		var n = l(e);
		return t ? n : p(n)
	}, (d.ArrayBuffer = function() {
		this.reset()
	}).prototype.append = function(e) {
		var t, n = this._concatArrayBuffer(this._buff, e),
			i = n.length;
		for(this._length += e.byteLength, t = 64; t <= i; t += 64) u(this._state, c(n.subarray(t - 64, t)));
		return this._buff = t - 64 < i ? n.subarray(t - 64) : new Uint8Array(0), this
	}, d.ArrayBuffer.prototype.end = function(e) {
		var t, n, i = this._buff,
			o = i.length,
			r = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
		for(t = 0; t < o; t += 1) r[t >> 2] |= i[t] << (t % 4 << 3);
		return this._finish(r, o), n = e ? this._state : p(this._state), this.reset(), n
	}, d.ArrayBuffer.prototype._finish = d.prototype._finish, d.ArrayBuffer.prototype.reset = function() {
		return this._buff = new Uint8Array(0), this._length = 0, this._state = [1732584193, -271733879, -1732584194, 271733878], this
	}, d.ArrayBuffer.prototype.destroy = d.prototype.destroy, d.ArrayBuffer.prototype._concatArrayBuffer = function(e, t) {
		var n = e.length,
			i = new Uint8Array(n + t.byteLength);
		return i.set(e), i.set(new Uint8Array(t), n), i
	}, d.ArrayBuffer.hash = function(e, t) {
		var n = function(e) {
			var t, n, i, o, r, s, a = e.length,
				l = [1732584193, -271733879, -1732584194, 271733878];
			for(t = 64; t <= a; t += 64) u(l, c(e.subarray(t - 64, t)));
			for(n = (e = t - 64 < a ? e.subarray(t - 64) : new Uint8Array(0)).length, i = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], t = 0; t < n; t += 1) i[t >> 2] |= e[t] << (t % 4 << 3);
			if(i[t >> 2] |= 128 << (t % 4 << 3), t > 55)
				for(u(l, i), t = 0; t < 16; t += 1) i[t] = 0;
			return o = (o = 8 * a).toString(16).match(/(.*?)(.{0,8})$/), r = parseInt(o[2], 16), s = parseInt(o[1], 16) || 0, i[14] = r, i[15] = s, u(l, i), l
		}(new Uint8Array(e));
		return t ? n : p(n)
	}, d
}), "object" != typeof JSON && (JSON = {}),
	function() {
		"use strict";

		function f(e) {
			return e < 10 ? "0" + e : e
		}
		var cx, escapable, gap, indent, meta, rep;

		function quote(e) {
			return escapable.lastIndex = 0, escapable.test(e) ? '"' + e.replace(escapable, function(e) {
				var t = meta[e];
				return "string" == typeof t ? t : "\\u" + ("0000" + e.charCodeAt(0).toString(16)).slice(-4)
			}) + '"' : '"' + e + '"'
		}

		function str(e, t) {
			var n, i, o, r, s, u = gap,
				a = t[e];
			switch(a && "object" == typeof a && "function" == typeof a.toJSON && (a = a.toJSON(e)), "function" == typeof rep && (a = rep.call(t, e, a)), typeof a) {
				case "string":
					return quote(a);
				case "number":
					return isFinite(a) ? String(a) : "null";
				case "boolean":
				case "null":
					return String(a);
				case "object":
					if(!a) return "null";
					if(gap += indent, s = [], "[object Array]" === Object.prototype.toString.apply(a)) {
						for(r = a.length, n = 0; n < r; n += 1) s[n] = str(n, a) || "null";
						return o = 0 === s.length ? "[]" : gap ? "[\n" + gap + s.join(",\n" + gap) + "\n" + u + "]" : "[" + s.join(",") + "]", gap = u, o
					}
					if(rep && "object" == typeof rep)
						for(r = rep.length, n = 0; n < r; n += 1) "string" == typeof rep[n] && (o = str(i = rep[n], a)) && s.push(quote(i) + (gap ? ": " : ":") + o);
					else
						for(i in a) Object.prototype.hasOwnProperty.call(a, i) && (o = str(i, a)) && s.push(quote(i) + (gap ? ": " : ":") + o);
					return o = 0 === s.length ? "{}" : gap ? "{\n" + gap + s.join(",\n" + gap) + "\n" + u + "}" : "{" + s.join(",") + "}", gap = u, o
			}
		}
		"function" != typeof Date.prototype.toJSON && (Date.prototype.toJSON = function() {
			return isFinite(this.valueOf()) ? this.getUTCFullYear() + "-" + f(this.getUTCMonth() + 1) + "-" + f(this.getUTCDate()) + "T" + f(this.getUTCHours()) + ":" + f(this.getUTCMinutes()) + ":" + f(this.getUTCSeconds()) + "Z" : null
		}, String.prototype.toJSON = Number.prototype.toJSON = Boolean.prototype.toJSON = function() {
			return this.valueOf()
		}), "function" != typeof JSON.stringify && (escapable = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g, meta = {
			"\b": "\\b",
			"\t": "\\t",
			"\n": "\\n",
			"\f": "\\f",
			"\r": "\\r",
			'"': '\\"',
			"\\": "\\\\"
		}, JSON.stringify = function(e, t, n) {
			var i;
			if(gap = "", indent = "", "number" == typeof n)
				for(i = 0; i < n; i += 1) indent += " ";
			else "string" == typeof n && (indent = n);
			if(rep = t, t && "function" != typeof t && ("object" != typeof t || "number" != typeof t.length)) throw new Error("JSON.stringify");
			return str("", {
				"": e
			})
		}), "function" != typeof JSON.parse && (cx = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g, JSON.parse = function(text, reviver) {
			var j;

			function walk(e, t) {
				var n, i, o = e[t];
				if(o && "object" == typeof o)
					for(n in o) Object.prototype.hasOwnProperty.call(o, n) && (void 0 !== (i = walk(o, n)) ? o[n] = i : delete o[n]);
				return reviver.call(e, t, o)
			}
			if(text = String(text), cx.lastIndex = 0, cx.test(text) && (text = text.replace(cx, function(e) {
					return "\\u" + ("0000" + e.charCodeAt(0).toString(16)).slice(-4)
				})), /^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, "@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, "]").replace(/(?:^|:|,)(?:\s*\[)+/g, ""))) return j = eval("(" + text + ")"), "function" == typeof reviver ? walk({
				"": j
			}, "") : j;
			throw new SyntaxError("JSON.parse")
		})
	}();